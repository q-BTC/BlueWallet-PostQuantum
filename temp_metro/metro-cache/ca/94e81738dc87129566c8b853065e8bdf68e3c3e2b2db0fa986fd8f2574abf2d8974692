{"dependencies":[{"name":"../script.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":49,"column":29,"index":1416},"end":{"line":49,"column":53,"index":1440}}],"key":"p9OR0L1sKDUxCHdIMi6OilxLi3o="}},{"name":"./lazy.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":51,"column":26,"index":1513},"end":{"line":51,"column":47,"index":1534}}],"key":"t1fiFRkiV1bqibm5NX7pWpRqlmQ="}},{"name":"valibot","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":52,"column":23,"index":1560},"end":{"line":52,"column":41,"index":1578}}],"key":"rRKi8w2T+ZK7uQFy8MRs6k6j9DA="}},{"name":"../types.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":50,"column":19,"index":1462},"end":{"line":50,"column":42,"index":1485}},{"start":{"line":50,"column":19,"index":1462},"end":{"line":50,"column":42,"index":1485}},{"start":{"line":50,"column":19,"index":1462},"end":{"line":50,"column":42,"index":1485}},{"start":{"line":50,"column":19,"index":1462},"end":{"line":50,"column":42,"index":1485}}],"key":"fEWP9g3yw1tvmzSUSkgsecUHZn0="}},{"name":"../networks.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":48,"column":22,"index":1359},"end":{"line":48,"column":48,"index":1385}}],"key":"5BMEhazlsIWlJloG/UYHcQZ6V9A="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || ('get' in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = {\n        enumerable: true,\n        get: function get() {\n          return m[k];\n        }\n      };\n    }\n    Object.defineProperty(o, k2, desc);\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n  var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n    Object.defineProperty(o, 'default', {\n      enumerable: true,\n      value: v\n    });\n  } : function (o, v) {\n    o['default'] = v;\n  });\n  var __importStar = this && this.__importStar || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== 'default' && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n  };\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.p2data = p2data;\n  var bscript = __importStar(_$$_REQUIRE(_dependencyMap[0], \"../script.cjs\"));\n  var lazy = __importStar(_$$_REQUIRE(_dependencyMap[1], \"./lazy.cjs\"));\n  var v = __importStar(_$$_REQUIRE(_dependencyMap[2], \"valibot\"));\n  var OPS = bscript.OPS;\n  // output: OP_RETURN ...\n  /**\n   * Embeds data in a Bitcoin payment.\n   * @param a - The payment object.\n   * @param opts - Optional payment options.\n   * @returns The modified payment object.\n   * @throws {TypeError} If there is not enough data or if the output is invalid.\n   */\n  function p2data(a, opts) {\n    if (!a.data && !a.output) throw new TypeError('Not enough data');\n    opts = Object.assign({\n      validate: true\n    }, opts || {});\n    v.parse(v.partial(v.object({\n      network: v.object({}),\n      output: _$$_REQUIRE(_dependencyMap[3], \"../types.cjs\").BufferSchema,\n      data: v.array(_$$_REQUIRE(_dependencyMap[3], \"../types.cjs\").BufferSchema)\n    })), a);\n    var network = a.network || _$$_REQUIRE(_dependencyMap[4], \"../networks.cjs\").bitcoin;\n    var o = {\n      name: 'embed',\n      network: network\n    };\n    lazy.prop(o, 'output', function () {\n      if (!a.data) return;\n      return bscript.compile([OPS.OP_RETURN].concat(a.data));\n    });\n    lazy.prop(o, 'data', function () {\n      if (!a.output) return;\n      return bscript.decompile(a.output).slice(1);\n    });\n    // extended validation\n    if (opts.validate) {\n      if (a.output) {\n        var chunks = bscript.decompile(a.output);\n        if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n        if (!chunks.slice(1).every(function (chunk) {\n          return v.is(_$$_REQUIRE(_dependencyMap[3], \"../types.cjs\").BufferSchema, chunk);\n        })) throw new TypeError('Output is invalid');\n        if (a.data && !(0, _$$_REQUIRE(_dependencyMap[3], \"../types.cjs\").stacksEqual)(a.data, o.data)) throw new TypeError('Data mismatch');\n      }\n    }\n    return Object.assign(o, a);\n  }\n});","lineCount":87,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__createBinding"],[4,21,2,19],[4,24,3,3],[4,28,3,7],[4,32,3,11],[4,36,3,15],[4,37,3,16,"__createBinding"],[4,52,3,31],[4,57,4,3,"Object"],[4,63,4,9],[4,64,4,10,"create"],[4,70,4,16],[4,73,5,6],[4,83,5,16,"o"],[4,84,5,17],[4,86,5,19,"m"],[4,87,5,20],[4,89,5,22,"k"],[4,90,5,23],[4,92,5,25,"k2"],[4,94,5,27],[4,96,5,29],[5,4,6,8],[5,8,6,12,"k2"],[5,10,6,14],[5,15,6,19,"undefined"],[5,24,6,28],[5,26,6,30,"k2"],[5,28,6,32],[5,31,6,35,"k"],[5,32,6,36],[6,4,7,8],[6,8,7,12,"desc"],[6,12,7,16],[6,15,7,19,"Object"],[6,21,7,25],[6,22,7,26,"getOwnPropertyDescriptor"],[6,46,7,50],[6,47,7,51,"m"],[6,48,7,52],[6,50,7,54,"k"],[6,51,7,55],[6,52,7,56],[7,4,8,8],[7,8,9,10],[7,9,9,11,"desc"],[7,13,9,15],[7,18,10,11],[7,23,10,16],[7,27,10,20,"desc"],[7,31,10,24],[7,34,10,27],[7,35,10,28,"m"],[7,36,10,29],[7,37,10,30,"__esModule"],[7,47,10,40],[7,50,10,43,"desc"],[7,54,10,47],[7,55,10,48,"writable"],[7,63,10,56],[7,67,10,60,"desc"],[7,71,10,64],[7,72,10,65,"configurable"],[7,84,10,77],[7,85,10,78],[7,87,11,10],[8,6,12,10,"desc"],[8,10,12,14],[8,13,12,17],[9,8,13,12,"enumerable"],[9,18,13,22],[9,20,13,24],[9,24,13,28],[10,8,14,12,"get"],[10,11,14,15],[10,13,14,17],[10,22,14,12,"get"],[10,25,14,15,"get"],[10,26,14,15],[10,28,14,29],[11,10,15,14],[11,17,15,21,"m"],[11,18,15,22],[11,19,15,23,"k"],[11,20,15,24],[11,21,15,25],[12,8,16,12],[13,6,17,10],[13,7,17,11],[14,4,18,8],[15,4,19,8,"Object"],[15,10,19,14],[15,11,19,15,"defineProperty"],[15,25,19,29],[15,26,19,30,"o"],[15,27,19,31],[15,29,19,33,"k2"],[15,31,19,35],[15,33,19,37,"desc"],[15,37,19,41],[15,38,19,42],[16,2,20,6],[16,3,20,7],[16,6,21,6],[16,16,21,16,"o"],[16,17,21,17],[16,19,21,19,"m"],[16,20,21,20],[16,22,21,22,"k"],[16,23,21,23],[16,25,21,25,"k2"],[16,27,21,27],[16,29,21,29],[17,4,22,8],[17,8,22,12,"k2"],[17,10,22,14],[17,15,22,19,"undefined"],[17,24,22,28],[17,26,22,30,"k2"],[17,28,22,32],[17,31,22,35,"k"],[17,32,22,36],[18,4,23,8,"o"],[18,5,23,9],[18,6,23,10,"k2"],[18,8,23,12],[18,9,23,13],[18,12,23,16,"m"],[18,13,23,17],[18,14,23,18,"k"],[18,15,23,19],[18,16,23,20],[19,2,24,6],[19,3,24,7],[19,4,24,8],[20,2,25,0],[20,6,25,4,"__setModuleDefault"],[20,24,25,22],[20,27,26,3],[20,31,26,7],[20,35,26,11],[20,39,26,15],[20,40,26,16,"__setModuleDefault"],[20,58,26,34],[20,63,27,3,"Object"],[20,69,27,9],[20,70,27,10,"create"],[20,76,27,16],[20,79,28,6],[20,89,28,16,"o"],[20,90,28,17],[20,92,28,19,"v"],[20,93,28,20],[20,95,28,22],[21,4,29,8,"Object"],[21,10,29,14],[21,11,29,15,"defineProperty"],[21,25,29,29],[21,26,29,30,"o"],[21,27,29,31],[21,29,29,33],[21,38,29,42],[21,40,29,44],[22,6,29,46,"enumerable"],[22,16,29,56],[22,18,29,58],[22,22,29,62],[23,6,29,64,"value"],[23,11,29,69],[23,13,29,71,"v"],[24,4,29,73],[24,5,29,74],[24,6,29,75],[25,2,30,6],[25,3,30,7],[25,6,31,6],[25,16,31,16,"o"],[25,17,31,17],[25,19,31,19,"v"],[25,20,31,20],[25,22,31,22],[26,4,32,8,"o"],[26,5,32,9],[26,6,32,10],[26,15,32,19],[26,16,32,20],[26,19,32,23,"v"],[26,20,32,24],[27,2,33,6],[27,3,33,7],[27,4,33,8],[28,2,34,0],[28,6,34,4,"__importStar"],[28,18,34,16],[28,21,35,3],[28,25,35,7],[28,29,35,11],[28,33,35,15],[28,34,35,16,"__importStar"],[28,46,35,28],[28,50,36,2],[28,60,36,12,"mod"],[28,63,36,15],[28,65,36,17],[29,4,37,4],[29,8,37,8,"mod"],[29,11,37,11],[29,15,37,15,"mod"],[29,18,37,18],[29,19,37,19,"__esModule"],[29,29,37,29],[29,31,37,31],[29,38,37,38,"mod"],[29,41,37,41],[30,4,38,4],[30,8,38,8,"result"],[30,14,38,14],[30,17,38,17],[30,18,38,18],[30,19,38,19],[31,4,39,4],[31,8,39,8,"mod"],[31,11,39,11],[31,15,39,15],[31,19,39,19],[31,21,40,6],[31,26,40,11],[31,30,40,15,"k"],[31,31,40,16],[31,35,40,20,"mod"],[31,38,40,23],[31,40,41,8],[31,44,41,12,"k"],[31,45,41,13],[31,50,41,18],[31,59,41,27],[31,63,41,31,"Object"],[31,69,41,37],[31,70,41,38,"prototype"],[31,79,41,47],[31,80,41,48,"hasOwnProperty"],[31,94,41,62],[31,95,41,63,"call"],[31,99,41,67],[31,100,41,68,"mod"],[31,103,41,71],[31,105,41,73,"k"],[31,106,41,74],[31,107,41,75],[31,109,42,10,"__createBinding"],[31,124,42,25],[31,125,42,26,"result"],[31,131,42,32],[31,133,42,34,"mod"],[31,136,42,37],[31,138,42,39,"k"],[31,139,42,40],[31,140,42,41],[32,4,43,4,"__setModuleDefault"],[32,22,43,22],[32,23,43,23,"result"],[32,29,43,29],[32,31,43,31,"mod"],[32,34,43,34],[32,35,43,35],[33,4,44,4],[33,11,44,11,"result"],[33,17,44,17],[34,2,45,2],[34,3,45,3],[35,2,46,0,"Object"],[35,8,46,6],[35,9,46,7,"defineProperty"],[35,23,46,21],[35,24,46,22,"exports"],[35,31,46,29],[35,33,46,31],[35,45,46,43],[35,47,46,45],[36,4,46,47,"value"],[36,9,46,52],[36,11,46,54],[37,2,46,59],[37,3,46,60],[37,4,46,61],[38,2,47,0,"exports"],[38,9,47,7],[38,10,47,8,"p2data"],[38,16,47,14],[38,19,47,17,"p2data"],[38,25,47,23],[39,2,49,0],[39,6,49,6,"bscript"],[39,13,49,13],[39,16,49,16,"__importStar"],[39,28,49,28],[39,29,49,29,"require"],[39,40,49,36],[39,41,49,36,"_dependencyMap"],[39,55,49,36],[39,75,49,52],[39,76,49,53],[39,77,49,54],[40,2,51,0],[40,6,51,6,"lazy"],[40,10,51,10],[40,13,51,13,"__importStar"],[40,25,51,25],[40,26,51,26,"require"],[40,37,51,33],[40,38,51,33,"_dependencyMap"],[40,52,51,33],[40,69,51,46],[40,70,51,47],[40,71,51,48],[41,2,52,0],[41,6,52,6,"v"],[41,7,52,7],[41,10,52,10,"__importStar"],[41,22,52,22],[41,23,52,23,"require"],[41,34,52,30],[41,35,52,30,"_dependencyMap"],[41,49,52,30],[41,63,52,40],[41,64,52,41],[41,65,52,42],[42,2,53,0],[42,6,53,6,"OPS"],[42,9,53,9],[42,12,53,12,"bscript"],[42,19,53,19],[42,20,53,20,"OPS"],[42,23,53,23],[43,2,54,0],[44,2,55,0],[45,0,56,0],[46,0,57,0],[47,0,58,0],[48,0,59,0],[49,0,60,0],[50,0,61,0],[51,2,62,0],[51,11,62,9,"p2data"],[51,17,62,15,"p2data"],[51,18,62,16,"a"],[51,19,62,17],[51,21,62,19,"opts"],[51,25,62,23],[51,27,62,25],[52,4,63,2],[52,8,63,6],[52,9,63,7,"a"],[52,10,63,8],[52,11,63,9,"data"],[52,15,63,13],[52,19,63,17],[52,20,63,18,"a"],[52,21,63,19],[52,22,63,20,"output"],[52,28,63,26],[52,30,63,28],[52,36,63,34],[52,40,63,38,"TypeError"],[52,49,63,47],[52,50,63,48],[52,67,63,65],[52,68,63,66],[53,4,64,2,"opts"],[53,8,64,6],[53,11,64,9,"Object"],[53,17,64,15],[53,18,64,16,"assign"],[53,24,64,22],[53,25,64,23],[54,6,64,25,"validate"],[54,14,64,33],[54,16,64,35],[55,4,64,40],[55,5,64,41],[55,7,64,43,"opts"],[55,11,64,47],[55,15,64,51],[55,16,64,52],[55,17,64,53],[55,18,64,54],[56,4,65,2,"v"],[56,5,65,3],[56,6,65,4,"parse"],[56,11,65,9],[56,12,66,4,"v"],[56,13,66,5],[56,14,66,6,"partial"],[56,21,66,13],[56,22,67,6,"v"],[56,23,67,7],[56,24,67,8,"object"],[56,30,67,14],[56,31,67,15],[57,6,68,8,"network"],[57,13,68,15],[57,15,68,17,"v"],[57,16,68,18],[57,17,68,19,"object"],[57,23,68,25],[57,24,68,26],[57,25,68,27],[57,26,68,28],[57,27,68,29],[58,6,69,8,"output"],[58,12,69,14],[58,14,69,16,"_$$_REQUIRE"],[58,25,69,16],[58,26,69,16,"_dependencyMap"],[58,40,69,16],[58,61,69,27,"BufferSchema"],[58,73,69,39],[59,6,70,8,"data"],[59,10,70,12],[59,12,70,14,"v"],[59,13,70,15],[59,14,70,16,"array"],[59,19,70,21],[59,20,70,22,"_$$_REQUIRE"],[59,31,70,22],[59,32,70,22,"_dependencyMap"],[59,46,70,22],[59,67,70,33,"BufferSchema"],[59,79,70,45],[60,4,71,6],[60,5,71,7],[60,6,72,4],[60,7,72,5],[60,9,73,4,"a"],[60,10,74,2],[60,11,74,3],[61,4,75,2],[61,8,75,8,"network"],[61,15,75,15],[61,18,75,18,"a"],[61,19,75,19],[61,20,75,20,"network"],[61,27,75,27],[61,31,75,31,"_$$_REQUIRE"],[61,42,75,31],[61,43,75,31,"_dependencyMap"],[61,57,75,31],[61,81,75,45,"bitcoin"],[61,88,75,52],[62,4,76,2],[62,8,76,8,"o"],[62,9,76,9],[62,12,76,12],[63,6,76,14,"name"],[63,10,76,18],[63,12,76,20],[63,19,76,27],[64,6,76,29,"network"],[64,13,76,36],[64,15,76,29,"network"],[65,4,76,37],[65,5,76,38],[66,4,77,2,"lazy"],[66,8,77,6],[66,9,77,7,"prop"],[66,13,77,11],[66,14,77,12,"o"],[66,15,77,13],[66,17,77,15],[66,25,77,23],[66,27,77,25],[66,39,77,31],[67,6,78,4],[67,10,78,8],[67,11,78,9,"a"],[67,12,78,10],[67,13,78,11,"data"],[67,17,78,15],[67,19,78,17],[68,6,79,4],[68,13,79,11,"bscript"],[68,20,79,18],[68,21,79,19,"compile"],[68,28,79,26],[68,29,79,27],[68,30,79,28,"OPS"],[68,33,79,31],[68,34,79,32,"OP_RETURN"],[68,43,79,41],[68,44,79,42],[68,45,79,43,"concat"],[68,51,79,49],[68,52,79,50,"a"],[68,53,79,51],[68,54,79,52,"data"],[68,58,79,56],[68,59,79,57],[68,60,79,58],[69,4,80,2],[69,5,80,3],[69,6,80,4],[70,4,81,2,"lazy"],[70,8,81,6],[70,9,81,7,"prop"],[70,13,81,11],[70,14,81,12,"o"],[70,15,81,13],[70,17,81,15],[70,23,81,21],[70,25,81,23],[70,37,81,29],[71,6,82,4],[71,10,82,8],[71,11,82,9,"a"],[71,12,82,10],[71,13,82,11,"output"],[71,19,82,17],[71,21,82,19],[72,6,83,4],[72,13,83,11,"bscript"],[72,20,83,18],[72,21,83,19,"decompile"],[72,30,83,28],[72,31,83,29,"a"],[72,32,83,30],[72,33,83,31,"output"],[72,39,83,37],[72,40,83,38],[72,41,83,39,"slice"],[72,46,83,44],[72,47,83,45],[72,48,83,46],[72,49,83,47],[73,4,84,2],[73,5,84,3],[73,6,84,4],[74,4,85,2],[75,4,86,2],[75,8,86,6,"opts"],[75,12,86,10],[75,13,86,11,"validate"],[75,21,86,19],[75,23,86,21],[76,6,87,4],[76,10,87,8,"a"],[76,11,87,9],[76,12,87,10,"output"],[76,18,87,16],[76,20,87,18],[77,8,88,6],[77,12,88,12,"chunks"],[77,18,88,18],[77,21,88,21,"bscript"],[77,28,88,28],[77,29,88,29,"decompile"],[77,38,88,38],[77,39,88,39,"a"],[77,40,88,40],[77,41,88,41,"output"],[77,47,88,47],[77,48,88,48],[78,8,89,6],[78,12,89,10,"chunks"],[78,18,89,16],[78,19,89,17],[78,20,89,18],[78,21,89,19],[78,26,89,24,"OPS"],[78,29,89,27],[78,30,89,28,"OP_RETURN"],[78,39,89,37],[78,41,89,39],[78,47,89,45],[78,51,89,49,"TypeError"],[78,60,89,58],[78,61,89,59],[78,80,89,78],[78,81,89,79],[79,8,90,6],[79,12,90,10],[79,13,90,11,"chunks"],[79,19,90,17],[79,20,90,18,"slice"],[79,25,90,23],[79,26,90,24],[79,27,90,25],[79,28,90,26],[79,29,90,27,"every"],[79,34,90,32],[79,35,90,33],[79,45,90,33,"chunk"],[79,50,90,38],[80,10,90,38],[80,17,90,42,"v"],[80,18,90,43],[80,19,90,44,"is"],[80,21,90,46],[80,22,90,47,"_$$_REQUIRE"],[80,33,90,47],[80,34,90,47,"_dependencyMap"],[80,48,90,47],[80,69,90,58,"BufferSchema"],[80,81,90,70],[80,83,90,72,"chunk"],[80,88,90,77],[80,89,90,78],[81,8,90,78],[81,10,90,79],[81,12,91,8],[81,18,91,14],[81,22,91,18,"TypeError"],[81,31,91,27],[81,32,91,28],[81,51,91,47],[81,52,91,48],[82,8,92,6],[82,12,92,10,"a"],[82,13,92,11],[82,14,92,12,"data"],[82,18,92,16],[82,22,92,20],[82,23,92,21],[82,24,92,22],[82,25,92,23],[82,27,92,25,"_$$_REQUIRE"],[82,38,92,25],[82,39,92,25,"_dependencyMap"],[82,53,92,25],[82,74,92,36,"stacksEqual"],[82,85,92,47],[82,87,92,49,"a"],[82,88,92,50],[82,89,92,51,"data"],[82,93,92,55],[82,95,92,57,"o"],[82,96,92,58],[82,97,92,59,"data"],[82,101,92,63],[82,102,92,64],[82,104,93,8],[82,110,93,14],[82,114,93,18,"TypeError"],[82,123,93,27],[82,124,93,28],[82,139,93,43],[82,140,93,44],[83,6,94,4],[84,4,95,2],[85,4,96,2],[85,11,96,9,"Object"],[85,17,96,15],[85,18,96,16,"assign"],[85,24,96,22],[85,25,96,23,"o"],[85,26,96,24],[85,28,96,26,"a"],[85,29,96,27],[85,30,96,28],[86,2,97,0],[87,0,97,1],[87,3]],"functionMap":{"names":["<global>","<anonymous>","desc.get","p2data","lazy.prop$argument_2","chunks.slice.every$argument_0"],"mappings":"AAA;MCI;iBCS;aDE;ODI;MCC;ODG;MCI;ODE;MCC;ODE;ECG;GDS;AGiB;yBCe;GDG;uBCC;GDG;iCEM,6CF;CHO"}},"type":"js/module"}]}