{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"yg7e6laZwmpbIvId5jovq9ugXp8="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30="}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"aU3Lrys8xTVpYSDJal2nhppojC8="}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"4DwyfFXBA53CJWVTVj5w3kH1PUg="}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"y0uNg4LxF1CLscQChxzgo5dfjvA="}},{"name":"@babel/runtime/helpers/wrapNativeSuper","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":69,"column":0,"index":2223}}],"key":"imgnTtXT+OlBfDxpawXO7znTT9E="}},{"name":"bitcoinjs-lib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":24,"index":167},"end":{"line":4,"column":48,"index":191}}],"key":"PV1IDhC/8j/Z7SyCy2R2SKCUYnk="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _asyncToGenerator = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _createClass = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/possibleConstructorReturn\");\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/getPrototypeOf\");\n  var _inherits = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/inherits\");\n  var _wrapNativeSuper = _$$_REQUIRE(_dependencyMap[6], \"@babel/runtime/helpers/wrapNativeSuper\");\n  function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\n  function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.PayjoinRequester = exports.PayjoinEndpointError = void 0;\n  /**\n   * Handle known errors and return a generic message for unkonw errors.\n   *\n   * This prevents people integrating this library introducing an accidental\n   * phishing vulnerability in their app by displaying a server generated\n   * messages in their UI.\n   *\n   * We still expose the error code so custom handling of specific or unknown\n   * error codes can still be added in the app.\n   */\n  var PayjoinEndpointError = /*#__PURE__*/function (_Error) {\n    function PayjoinEndpointError(code) {\n      var _this;\n      _classCallCheck(this, PayjoinEndpointError);\n      _this = _callSuper(this, PayjoinEndpointError, [PayjoinEndpointError.codeToMessage(code)]);\n      _this.code = code;\n      return _this;\n    }\n    _inherits(PayjoinEndpointError, _Error);\n    return _createClass(PayjoinEndpointError, null, [{\n      key: \"codeToMessage\",\n      value: function codeToMessage(code) {\n        return this.messageMap[code] || 'Something went wrong when requesting the payjoin endpoint.';\n      }\n    }]);\n  }(/*#__PURE__*/_wrapNativeSuper(Error));\n  exports.PayjoinEndpointError = PayjoinEndpointError;\n  PayjoinEndpointError.messageMap = {\n    unavailable: 'The payjoin endpoint is not available for now.',\n    'not-enough-money': 'The receiver added some inputs but could not bump the fee of the payjoin proposal.',\n    'version-unsupported': 'This version of payjoin is not supported.',\n    'original-psbt-rejected': 'The receiver rejected the original PSBT.'\n  };\n  var PayjoinRequester = /*#__PURE__*/function () {\n    function PayjoinRequester(endpointUrl, customFetch) {\n      _classCallCheck(this, PayjoinRequester);\n      this.endpointUrl = endpointUrl;\n      this.customFetch = customFetch;\n    }\n    return _createClass(PayjoinRequester, [{\n      key: \"requestPayjoin\",\n      value: function () {\n        var _requestPayjoin = _asyncToGenerator(function* (psbt) {\n          if (!psbt) {\n            throw new Error('Need to pass psbt');\n          }\n          var fetchFunction = this.customFetch || fetch;\n          var response = yield fetchFunction(this.endpointUrl, {\n            method: 'POST',\n            headers: new Headers({\n              'Content-Type': 'text/plain'\n            }),\n            body: psbt.toBase64()\n          }).catch(function (v) {\n            return {\n              ok: false,\n              text: function () {\n                var _text = _asyncToGenerator(function* () {\n                  return v.message;\n                });\n                function text() {\n                  return _text.apply(this, arguments);\n                }\n                return text;\n              }()\n            };\n          });\n          var responseText = yield response.text();\n          if (!response.ok) {\n            var errorCode = '';\n            try {\n              errorCode = JSON.parse(responseText).errorCode;\n            } catch (err) {}\n            throw new PayjoinEndpointError(errorCode);\n          }\n          return _$$_REQUIRE(_dependencyMap[7], \"bitcoinjs-lib\").Psbt.fromBase64(responseText);\n        });\n        function requestPayjoin(_x) {\n          return _requestPayjoin.apply(this, arguments);\n        }\n        return requestPayjoin;\n      }()\n    }]);\n  }();\n  exports.PayjoinRequester = PayjoinRequester;\n});","lineCount":102,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"_$$_REQUIRE"],[4,37,1,13],[4,38,1,13,"_dependencyMap"],[4,52,1,13],[5,2,1,13],[5,6,1,13,"_classCallCheck"],[5,21,1,13],[5,24,1,13,"_$$_REQUIRE"],[5,35,1,13],[5,36,1,13,"_dependencyMap"],[5,50,1,13],[6,2,1,13],[6,6,1,13,"_createClass"],[6,18,1,13],[6,21,1,13,"_$$_REQUIRE"],[6,32,1,13],[6,33,1,13,"_dependencyMap"],[6,47,1,13],[7,2,1,13],[7,6,1,13,"_possibleConstructorReturn"],[7,32,1,13],[7,35,1,13,"_$$_REQUIRE"],[7,46,1,13],[7,47,1,13,"_dependencyMap"],[7,61,1,13],[8,2,1,13],[8,6,1,13,"_getPrototypeOf"],[8,21,1,13],[8,24,1,13,"_$$_REQUIRE"],[8,35,1,13],[8,36,1,13,"_dependencyMap"],[8,50,1,13],[9,2,1,13],[9,6,1,13,"_inherits"],[9,15,1,13],[9,18,1,13,"_$$_REQUIRE"],[9,29,1,13],[9,30,1,13,"_dependencyMap"],[9,44,1,13],[10,2,1,13],[10,6,1,13,"_wrapNativeSuper"],[10,22,1,13],[10,25,1,13,"_$$_REQUIRE"],[10,36,1,13],[10,37,1,13,"_dependencyMap"],[10,51,1,13],[11,2,1,13],[11,11,1,13,"_callSuper"],[11,22,1,13,"t"],[11,23,1,13],[11,25,1,13,"o"],[11,26,1,13],[11,28,1,13,"e"],[11,29,1,13],[11,40,1,13,"o"],[11,41,1,13],[11,44,1,13,"_getPrototypeOf"],[11,59,1,13],[11,60,1,13,"o"],[11,61,1,13],[11,64,1,13,"_possibleConstructorReturn"],[11,90,1,13],[11,91,1,13,"t"],[11,92,1,13],[11,94,1,13,"_isNativeReflectConstruct"],[11,119,1,13],[11,124,1,13,"Reflect"],[11,131,1,13],[11,132,1,13,"construct"],[11,141,1,13],[11,142,1,13,"o"],[11,143,1,13],[11,145,1,13,"e"],[11,146,1,13],[11,154,1,13,"_getPrototypeOf"],[11,169,1,13],[11,170,1,13,"t"],[11,171,1,13],[11,173,1,13,"constructor"],[11,184,1,13],[11,188,1,13,"o"],[11,189,1,13],[11,190,1,13,"apply"],[11,195,1,13],[11,196,1,13,"t"],[11,197,1,13],[11,199,1,13,"e"],[11,200,1,13],[12,2,1,13],[12,11,1,13,"_isNativeReflectConstruct"],[12,37,1,13],[12,51,1,13,"t"],[12,52,1,13],[12,56,1,13,"Boolean"],[12,63,1,13],[12,64,1,13,"prototype"],[12,73,1,13],[12,74,1,13,"valueOf"],[12,81,1,13],[12,82,1,13,"call"],[12,86,1,13],[12,87,1,13,"Reflect"],[12,94,1,13],[12,95,1,13,"construct"],[12,104,1,13],[12,105,1,13,"Boolean"],[12,112,1,13],[12,145,1,13,"t"],[12,146,1,13],[12,159,1,13,"_isNativeReflectConstruct"],[12,184,1,13],[12,196,1,13,"_isNativeReflectConstruct"],[12,222,1,13],[12,235,1,13,"t"],[12,236,1,13],[13,2,2,0,"Object"],[13,8,2,6],[13,9,2,7,"defineProperty"],[13,23,2,21],[13,24,2,22,"exports"],[13,31,2,29],[13,33,2,31],[13,45,2,43],[13,47,2,45],[14,4,2,47,"value"],[14,9,2,52],[14,11,2,54],[15,2,2,59],[15,3,2,60],[15,4,2,61],[16,2,3,0,"exports"],[16,9,3,7],[16,10,3,8,"PayjoinRequester"],[16,26,3,24],[16,29,3,27,"exports"],[16,36,3,34],[16,37,3,35,"PayjoinEndpointError"],[16,57,3,55],[16,60,3,58],[16,65,3,63],[16,66,3,64],[17,2,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,2,5,0],[27,6,15,6,"PayjoinEndpointError"],[27,26,15,26],[27,52,15,26,"_Error"],[27,58,15,26],[28,4,16,2],[28,13,16,2,"PayjoinEndpointError"],[28,34,16,14,"code"],[28,38,16,18],[28,40,16,20],[29,6,16,20],[29,10,16,20,"_this"],[29,15,16,20],[30,6,16,20,"_classCallCheck"],[30,21,16,20],[30,28,16,20,"PayjoinEndpointError"],[30,48,16,20],[31,6,17,4,"_this"],[31,11,17,4],[31,14,17,4,"_callSuper"],[31,24,17,4],[31,31,17,4,"PayjoinEndpointError"],[31,51,17,4],[31,54,17,10,"PayjoinEndpointError"],[31,74,17,30],[31,75,17,31,"codeToMessage"],[31,88,17,44],[31,89,17,45,"code"],[31,93,17,49],[31,94,17,50],[32,6,18,4,"_this"],[32,11,18,4],[32,12,18,9,"code"],[32,16,18,13],[32,19,18,16,"code"],[32,23,18,20],[33,6,18,21],[33,13,18,21,"_this"],[33,18,18,21],[34,4,19,2],[35,4,19,3,"_inherits"],[35,13,19,3],[35,14,19,3,"PayjoinEndpointError"],[35,34,19,3],[35,36,19,3,"_Error"],[35,42,19,3],[36,4,19,3],[36,11,19,3,"_createClass"],[36,23,19,3],[36,24,19,3,"PayjoinEndpointError"],[36,44,19,3],[37,6,19,3,"key"],[37,9,19,3],[38,6,19,3,"value"],[38,11,19,3],[38,13,20,2],[38,22,20,9,"codeToMessage"],[38,35,20,22,"codeToMessage"],[38,36,20,23,"code"],[38,40,20,27],[38,42,20,29],[39,8,21,4],[39,15,22,6],[39,19,22,10],[39,20,22,11,"messageMap"],[39,30,22,21],[39,31,22,22,"code"],[39,35,22,26],[39,36,22,27],[39,40,23,6],[39,100,23,66],[40,6,25,2],[41,4,25,3],[42,2,25,3],[42,17,25,3,"_wrapNativeSuper"],[42,33,25,3],[42,34,15,35,"Error"],[42,39,15,40],[43,2,27,0,"exports"],[43,9,27,7],[43,10,27,8,"PayjoinEndpointError"],[43,30,27,28],[43,33,27,31,"PayjoinEndpointError"],[43,53,27,51],[44,2,28,0,"PayjoinEndpointError"],[44,22,28,20],[44,23,28,21,"messageMap"],[44,33,28,31],[44,36,28,34],[45,4,29,2,"unavailable"],[45,15,29,13],[45,17,29,15],[45,65,29,63],[46,4,30,2],[46,22,30,20],[46,24,31,4],[46,108,31,88],[47,4,32,2],[47,25,32,23],[47,27,32,25],[47,70,32,68],[48,4,33,2],[48,28,33,26],[48,30,33,28],[49,2,34,0],[49,3,34,1],[50,2,34,2],[50,6,35,6,"PayjoinRequester"],[50,22,35,22],[51,4,36,2],[51,13,36,2,"PayjoinRequester"],[51,30,36,14,"endpointUrl"],[51,41,36,25],[51,43,36,27,"customFetch"],[51,54,36,38],[51,56,36,40],[52,6,36,40,"_classCallCheck"],[52,21,36,40],[52,28,36,40,"PayjoinRequester"],[52,44,36,40],[53,6,37,4],[53,10,37,8],[53,11,37,9,"endpointUrl"],[53,22,37,20],[53,25,37,23,"endpointUrl"],[53,36,37,34],[54,6,38,4],[54,10,38,8],[54,11,38,9,"customFetch"],[54,22,38,20],[54,25,38,23,"customFetch"],[54,36,38,34],[55,4,39,2],[56,4,39,3],[56,11,39,3,"_createClass"],[56,23,39,3],[56,24,39,3,"PayjoinRequester"],[56,40,39,3],[57,6,39,3,"key"],[57,9,39,3],[58,6,39,3,"value"],[58,11,39,3],[59,8,39,3],[59,12,39,3,"_requestPayjoin"],[59,27,39,3],[59,30,39,3,"_asyncToGenerator"],[59,47,39,3],[59,48,40,2],[59,59,40,23,"psbt"],[59,63,40,27],[59,65,40,29],[60,10,41,4],[60,14,41,8],[60,15,41,9,"psbt"],[60,19,41,13],[60,21,41,15],[61,12,42,6],[61,18,42,12],[61,22,42,16,"Error"],[61,27,42,21],[61,28,42,22],[61,47,42,41],[61,48,42,42],[62,10,43,4],[63,10,44,4],[63,14,44,10,"fetchFunction"],[63,27,44,23],[63,30,44,26],[63,34,44,30],[63,35,44,31,"customFetch"],[63,46,44,42],[63,50,44,46,"fetch"],[63,55,44,51],[64,10,45,4],[64,14,45,10,"response"],[64,22,45,18],[64,31,45,27,"fetchFunction"],[64,44,45,40],[64,45,45,41],[64,49,45,45],[64,50,45,46,"endpointUrl"],[64,61,45,57],[64,63,45,59],[65,12,46,6,"method"],[65,18,46,12],[65,20,46,14],[65,26,46,20],[66,12,47,6,"headers"],[66,19,47,13],[66,21,47,15],[66,25,47,19,"Headers"],[66,32,47,26],[66,33,47,27],[67,14,48,8],[67,28,48,22],[67,30,48,24],[68,12,49,6],[68,13,49,7],[68,14,49,8],[69,12,50,6,"body"],[69,16,50,10],[69,18,50,12,"psbt"],[69,22,50,16],[69,23,50,17,"toBase64"],[69,31,50,25],[69,32,50,26],[70,10,51,4],[70,11,51,5],[70,12,51,6],[70,13,51,7,"catch"],[70,18,51,12],[70,19,51,13],[70,29,51,14,"v"],[70,30,51,15],[71,12,51,15],[71,19,51,21],[72,14,52,6,"ok"],[72,16,52,8],[72,18,52,10],[72,23,52,15],[73,14,53,12,"text"],[73,18,53,16],[74,16,53,16],[74,20,53,16,"_text"],[74,25,53,16],[74,28,53,16,"_asyncToGenerator"],[74,45,53,16],[74,59,53,19],[75,18,54,8],[75,25,54,15,"v"],[75,26,54,16],[75,27,54,17,"message"],[75,34,54,24],[76,16,55,6],[76,17,55,7],[77,16,55,7],[77,25,53,12,"text"],[77,29,53,16,"text"],[77,30,53,16],[78,18,53,16],[78,25,53,16,"_text"],[78,30,53,16],[78,31,53,16,"apply"],[78,36,53,16],[78,43,53,16,"arguments"],[78,52,53,16],[79,16,53,16],[80,16,53,16],[80,23,53,12,"text"],[80,27,53,16],[81,14,53,16],[82,12,56,4],[82,13,56,5],[83,10,56,5],[83,11,56,6],[83,12,56,7],[84,10,57,4],[84,14,57,10,"responseText"],[84,26,57,22],[84,35,57,31,"response"],[84,43,57,39],[84,44,57,40,"text"],[84,48,57,44],[84,49,57,45],[84,50,57,46],[85,10,58,4],[85,14,58,8],[85,15,58,9,"response"],[85,23,58,17],[85,24,58,18,"ok"],[85,26,58,20],[85,28,58,22],[86,12,59,6],[86,16,59,10,"errorCode"],[86,25,59,19],[86,28,59,22],[86,30,59,24],[87,12,60,6],[87,16,60,10],[88,14,61,8,"errorCode"],[88,23,61,17],[88,26,61,20,"JSON"],[88,30,61,24],[88,31,61,25,"parse"],[88,36,61,30],[88,37,61,31,"responseText"],[88,49,61,43],[88,50,61,44],[88,51,61,45,"errorCode"],[88,60,61,54],[89,12,62,6],[89,13,62,7],[89,14,62,8],[89,21,62,15,"err"],[89,24,62,18],[89,26,62,20],[89,27,62,21],[90,12,63,6],[90,18,63,12],[90,22,63,16,"PayjoinEndpointError"],[90,42,63,36],[90,43,63,37,"errorCode"],[90,52,63,46],[90,53,63,47],[91,10,64,4],[92,10,65,4],[92,17,65,11,"_$$_REQUIRE"],[92,28,65,11],[92,29,65,11,"_dependencyMap"],[92,43,65,11],[92,65,65,27,"Psbt"],[92,69,65,31],[92,70,65,32,"fromBase64"],[92,80,65,42],[92,81,65,43,"responseText"],[92,93,65,55],[92,94,65,56],[93,8,66,2],[93,9,66,3],[94,8,66,3],[94,17,40,8,"requestPayjoin"],[94,31,40,22,"requestPayjoin"],[94,32,40,22,"_x"],[94,34,40,22],[95,10,40,22],[95,17,40,22,"_requestPayjoin"],[95,32,40,22],[95,33,40,22,"apply"],[95,38,40,22],[95,45,40,22,"arguments"],[95,54,40,22],[96,8,40,22],[97,8,40,22],[97,15,40,8,"requestPayjoin"],[97,29,40,22],[98,6,40,22],[99,4,40,22],[100,2,40,22],[101,2,68,0,"exports"],[101,9,68,7],[101,10,68,8,"PayjoinRequester"],[101,26,68,24],[101,29,68,27,"PayjoinRequester"],[101,45,68,43],[102,0,68,44],[102,3]],"functionMap":{"names":["<global>","PayjoinEndpointError","PayjoinEndpointError#constructor","PayjoinEndpointError.codeToMessage","PayjoinRequester","PayjoinRequester#constructor","PayjoinRequester#requestPayjoin","fetchFunction._catch$argument_0","text"],"mappings":"AAA;ACc;ECC;GDG;EEC;GFK;CDC;AIS;ECC;GDG;EEC;aCW;MCE;ODE;MDC;GFU;CJC"}},"type":"js/module"}]}