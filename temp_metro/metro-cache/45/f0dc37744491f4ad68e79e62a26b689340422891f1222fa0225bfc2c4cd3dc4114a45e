{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":91,"column":48,"index":3218}}],"key":"yg7e6laZwmpbIvId5jovq9ugXp8="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":91,"column":48,"index":3218}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30="}},{"name":"./PromiseHandle","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":25,"column":24,"index":1053},"end":{"line":25,"column":50,"index":1079}}],"key":"YeJJFLjuAMZqnN1+YnaTaxdEf8c="}},{"name":"./flags","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":16,"index":915},"end":{"line":22,"column":34,"index":933}}],"key":"n0WP4GhqtGGf9NpeD2G/jTx3Xak="}},{"name":"./binding","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":18,"index":877},"end":{"line":21,"column":38,"index":897}}],"key":"OjrA0Bxm3t0WtSdWtaEky0moQW8="}},{"name":"./Configuration","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":24,"column":24,"index":1001},"end":{"line":24,"column":50,"index":1027}}],"key":"qqnrb41OWDuP3s5DrQn/dt4SuZE=","isOptional":true}},{"name":"./indirect","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":23,"column":19,"index":954},"end":{"line":23,"column":40,"index":975}}],"key":"cYlSegnhnQg7iiD9MQpYQJJgaGk=","isOptional":true}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  ////////////////////////////////////////////////////////////////////////////\n  //\n  // Copyright 2022 Realm Inc.\n  //\n  // Licensed under the Apache License, Version 2.0 (the \"License\");\n  // you may not use this file except in compliance with the License.\n  // You may obtain a copy of the License at\n  //\n  // http://www.apache.org/licenses/LICENSE-2.0\n  //\n  // Unless required by applicable law or agreed to in writing, software\n  // distributed under the License is distributed on an \"AS IS\" BASIS,\n  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  // See the License for the specific language governing permissions and\n  // limitations under the License.\n  //\n  ////////////////////////////////////////////////////////////////////////////\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.ProgressRealmPromise = void 0;\n  var ProgressRealmPromise = /*#__PURE__*/function () {\n    /** @internal */\n    function ProgressRealmPromise(config) {\n      _classCallCheck(this, ProgressRealmPromise);\n      /** @internal */\n      this.handle = new (_$$_REQUIRE(_dependencyMap[2], \"./PromiseHandle\").PromiseHandle)();\n      /** @internal */\n      this.timeoutPromise = null;\n      /**\n       * Token used for unregistering the progress notifier.\n       * @internal\n       */\n      this.notifierToken = null;\n      this.then = this.handle.promise.then.bind(this.handle.promise);\n      this.catch = this.handle.promise.catch.bind(this.handle.promise);\n      this.finally = this.handle.promise.finally.bind(this.handle.promise);\n      if (_$$_REQUIRE(_dependencyMap[3], \"./flags\").flags.ALLOW_CLEAR_TEST_STATE) {\n        ProgressRealmPromise.instances.add(new (_$$_REQUIRE(_dependencyMap[4], \"./binding\").binding.WeakRef)(this));\n      }\n      try {\n        (0, _$$_REQUIRE(_dependencyMap[5], \"./Configuration\").validateConfiguration)(config);\n        var realm = new (_$$_REQUIRE(_dependencyMap[6], \"./indirect\").indirect.Realm)(config);\n        this.handle.resolve(realm);\n      } catch (err) {\n        if (this.notifierToken !== null) {\n          this.notifierToken = null;\n        }\n        this.handle.reject(err);\n      }\n    }\n    /**\n     * Cancels the download of the Realm\n     * If multiple `ProgressRealmPromise` instances are in progress for the same Realm, then canceling one of them\n     * will cancel all of them.\n     */\n    return _createClass(ProgressRealmPromise, [{\n      key: \"cancel\",\n      value: function cancel() {\n        var _this$timeoutPromise;\n        (_this$timeoutPromise = this.timeoutPromise) == null || _this$timeoutPromise.cancel();\n        if (this.notifierToken !== null) {\n          this.notifierToken = null;\n        }\n        // Tell anything awaiting the promise\n        this.rejectAsCanceled();\n      }\n    }, {\n      key: \"rejectAsCanceled\",\n      value: /** @internal */\n      function rejectAsCanceled() {\n        var err = new Error(\"Async open canceled\");\n        this.handle.reject(err);\n      }\n    }, {\n      key: Symbol.toStringTag,\n      get: function get() {\n        return ProgressRealmPromise.name;\n      }\n    }], [{\n      key: \"cancelAll\",\n      value:\n      /**\n       * Cancels all unresolved `ProgressRealmPromise` instances.\n       * @internal\n       */\n      function cancelAll() {\n        for (var promiseRef of ProgressRealmPromise.instances) {\n          var _promiseRef$deref;\n          (_promiseRef$deref = promiseRef.deref()) == null || _promiseRef$deref.cancel();\n        }\n        ProgressRealmPromise.instances.clear();\n      }\n    }]);\n  }();\n  /** @internal */\n  ProgressRealmPromise.instances = new Set();\n  exports.ProgressRealmPromise = ProgressRealmPromise;\n});","lineCount":104,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[5,2,3,0],[6,2,4,0],[7,2,5,0],[8,2,6,0],[9,2,7,0],[10,2,8,0],[11,2,9,0],[12,2,10,0],[13,2,11,0],[14,2,12,0],[15,2,13,0],[16,2,14,0],[17,2,15,0],[18,2,16,0],[19,2,17,0],[20,2,18,0],[21,2,18,0],[21,6,18,0,"_classCallCheck"],[21,21,18,0],[21,24,18,0,"_$$_REQUIRE"],[21,35,18,0],[21,36,18,0,"_dependencyMap"],[21,50,18,0],[22,2,18,0],[22,6,18,0,"_createClass"],[22,18,18,0],[22,21,18,0,"_$$_REQUIRE"],[22,32,18,0],[22,33,18,0,"_dependencyMap"],[22,47,18,0],[23,2,19,0,"Object"],[23,8,19,6],[23,9,19,7,"defineProperty"],[23,23,19,21],[23,24,19,22,"exports"],[23,31,19,29],[23,33,19,31],[23,45,19,43],[23,47,19,45],[24,4,19,47,"value"],[24,9,19,52],[24,11,19,54],[25,2,19,59],[25,3,19,60],[25,4,19,61],[26,2,20,0,"exports"],[26,9,20,7],[26,10,20,8,"ProgressRealmPromise"],[26,30,20,28],[26,33,20,31],[26,38,20,36],[26,39,20,37],[27,2,20,38],[27,6,26,6,"ProgressRealmPromise"],[27,26,26,26],[28,4,48,4],[29,4,49,4],[29,13,49,4,"ProgressRealmPromise"],[29,34,49,16,"config"],[29,40,49,22],[29,42,49,24],[30,6,49,24,"_classCallCheck"],[30,21,49,24],[30,28,49,24,"ProgressRealmPromise"],[30,48,49,24],[31,6,39,4],[32,6,39,4],[32,11,40,4,"handle"],[32,17,40,10],[32,20,40,13],[32,25,40,17,"_$$_REQUIRE"],[32,36,40,17],[32,37,40,17,"_dependencyMap"],[32,51,40,17],[32,75,40,33,"PromiseHandle"],[32,88,40,46],[32,90,40,47],[32,91,40,48],[33,6,41,4],[34,6,41,4],[34,11,42,4,"timeoutPromise"],[34,25,42,18],[34,28,42,21],[34,32,42,25],[35,6,43,4],[36,0,44,0],[37,0,45,0],[38,0,46,0],[39,6,43,4],[39,11,47,4,"notifierToken"],[39,24,47,17],[39,27,47,20],[39,31,47,24],[40,6,47,24],[40,11,78,4,"then"],[40,15,78,8],[40,18,78,11],[40,22,78,15],[40,23,78,16,"handle"],[40,29,78,22],[40,30,78,23,"promise"],[40,37,78,30],[40,38,78,31,"then"],[40,42,78,35],[40,43,78,36,"bind"],[40,47,78,40],[40,48,78,41],[40,52,78,45],[40,53,78,46,"handle"],[40,59,78,52],[40,60,78,53,"promise"],[40,67,78,60],[40,68,78,61],[41,6,78,61],[41,11,79,4,"catch"],[41,16,79,9],[41,19,79,12],[41,23,79,16],[41,24,79,17,"handle"],[41,30,79,23],[41,31,79,24,"promise"],[41,38,79,31],[41,39,79,32,"catch"],[41,44,79,37],[41,45,79,38,"bind"],[41,49,79,42],[41,50,79,43],[41,54,79,47],[41,55,79,48,"handle"],[41,61,79,54],[41,62,79,55,"promise"],[41,69,79,62],[41,70,79,63],[42,6,79,63],[42,11,80,4,"finally"],[42,18,80,11],[42,21,80,14],[42,25,80,18],[42,26,80,19,"handle"],[42,32,80,25],[42,33,80,26,"promise"],[42,40,80,33],[42,41,80,34,"finally"],[42,48,80,41],[42,49,80,42,"bind"],[42,53,80,46],[42,54,80,47],[42,58,80,51],[42,59,80,52,"handle"],[42,65,80,58],[42,66,80,59,"promise"],[42,73,80,66],[42,74,80,67],[43,6,50,8],[43,10,50,12,"_$$_REQUIRE"],[43,21,50,12],[43,22,50,12,"_dependencyMap"],[43,36,50,12],[43,52,50,20,"flags"],[43,57,50,25],[43,58,50,26,"ALLOW_CLEAR_TEST_STATE"],[43,80,50,48],[43,82,50,50],[44,8,51,12,"ProgressRealmPromise"],[44,28,51,32],[44,29,51,33,"instances"],[44,38,51,42],[44,39,51,43,"add"],[44,42,51,46],[44,43,51,47],[44,48,51,51,"_$$_REQUIRE"],[44,59,51,51],[44,60,51,51,"_dependencyMap"],[44,74,51,51],[44,92,51,61,"binding"],[44,99,51,68],[44,100,51,69,"WeakRef"],[44,107,51,76],[44,109,51,77],[44,113,51,81],[44,114,51,82],[44,115,51,83],[45,6,52,8],[46,6,53,8],[46,10,53,12],[47,8,54,12],[47,9,54,13],[47,10,54,14],[47,12,54,16,"_$$_REQUIRE"],[47,23,54,16],[47,24,54,16,"_dependencyMap"],[47,38,54,16],[47,62,54,32,"validateConfiguration"],[47,83,54,53],[47,85,54,55,"config"],[47,91,54,61],[47,92,54,62],[48,8,55,12],[48,12,55,18,"realm"],[48,17,55,23],[48,20,55,26],[48,25,55,30,"_$$_REQUIRE"],[48,36,55,30],[48,37,55,30,"_dependencyMap"],[48,51,55,30],[48,70,55,41,"indirect"],[48,78,55,49],[48,79,55,50,"Realm"],[48,84,55,55],[48,86,55,56,"config"],[48,92,55,62],[48,93,55,63],[49,8,56,12],[49,12,56,16],[49,13,56,17,"handle"],[49,19,56,23],[49,20,56,24,"resolve"],[49,27,56,31],[49,28,56,32,"realm"],[49,33,56,37],[49,34,56,38],[50,6,57,8],[50,7,57,9],[50,8,58,8],[50,15,58,15,"err"],[50,18,58,18],[50,20,58,20],[51,8,59,12],[51,12,59,16],[51,16,59,20],[51,17,59,21,"notifierToken"],[51,30,59,34],[51,35,59,39],[51,39,59,43],[51,41,59,45],[52,10,60,16],[52,14,60,20],[52,15,60,21,"notifierToken"],[52,28,60,34],[52,31,60,37],[52,35,60,41],[53,8,61,12],[54,8,62,12],[54,12,62,16],[54,13,62,17,"handle"],[54,19,62,23],[54,20,62,24,"reject"],[54,26,62,30],[54,27,62,31,"err"],[54,30,62,34],[54,31,62,35],[55,6,63,8],[56,4,64,4],[57,4,65,4],[58,0,66,0],[59,0,67,0],[60,0,68,0],[61,0,69,0],[62,4,65,4],[62,11,65,4,"_createClass"],[62,23,65,4],[62,24,65,4,"ProgressRealmPromise"],[62,44,65,4],[63,6,65,4,"key"],[63,9,65,4],[64,6,65,4,"value"],[64,11,65,4],[64,13,70,4],[64,22,70,4,"cancel"],[64,28,70,10,"cancel"],[64,29,70,10],[64,31,70,13],[65,8,70,13],[65,12,70,13,"_this$timeoutPromise"],[65,32,70,13],[66,8,71,8],[66,9,71,8,"_this$timeoutPromise"],[66,29,71,8],[66,36,71,12],[66,37,71,13,"timeoutPromise"],[66,51,71,27],[66,64,71,8,"_this$timeoutPromise"],[66,84,71,8],[66,85,71,29,"cancel"],[66,91,71,35],[66,92,71,36],[66,93,71,37],[67,8,72,8],[67,12,72,12],[67,16,72,16],[67,17,72,17,"notifierToken"],[67,30,72,30],[67,35,72,35],[67,39,72,39],[67,41,72,41],[68,10,73,12],[68,14,73,16],[68,15,73,17,"notifierToken"],[68,28,73,30],[68,31,73,33],[68,35,73,37],[69,8,74,8],[70,8,75,8],[71,8,76,8],[71,12,76,12],[71,13,76,13,"rejectAsCanceled"],[71,29,76,29],[71,30,76,30],[71,31,76,31],[72,6,77,4],[73,4,77,5],[74,6,77,5,"key"],[74,9,77,5],[75,6,77,5,"value"],[75,11,77,5],[75,13,81,4],[76,6,82,4],[76,15,82,4,"rejectAsCanceled"],[76,31,82,20,"rejectAsCanceled"],[76,32,82,20],[76,34,82,23],[77,8,83,8],[77,12,83,14,"err"],[77,15,83,17],[77,18,83,20],[77,22,83,24,"Error"],[77,27,83,29],[77,28,83,30],[77,49,83,51],[77,50,83,52],[78,8,84,8],[78,12,84,12],[78,13,84,13,"handle"],[78,19,84,19],[78,20,84,20,"reject"],[78,26,84,26],[78,27,84,27,"err"],[78,30,84,30],[78,31,84,31],[79,6,85,4],[80,4,85,5],[81,6,85,5,"key"],[81,9,85,5],[81,11,86,9,"Symbol"],[81,17,86,15],[81,18,86,16,"toStringTag"],[81,29,86,27],[82,6,86,27,"get"],[82,9,86,27],[82,11,86,4],[82,20,86,4,"get"],[82,24,86,4],[82,26,86,31],[83,8,87,8],[83,15,87,15,"ProgressRealmPromise"],[83,35,87,35],[83,36,87,36,"name"],[83,40,87,40],[84,6,88,4],[85,4,88,5],[86,6,88,5,"key"],[86,9,88,5],[87,6,88,5,"value"],[87,11,88,5],[88,6,29,4],[89,0,30,0],[90,0,31,0],[91,0,32,0],[92,6,33,4],[92,15,33,11,"cancelAll"],[92,24,33,20,"cancelAll"],[92,25,33,20],[92,27,33,23],[93,8,34,8],[93,13,34,13],[93,17,34,19,"promiseRef"],[93,27,34,29],[93,31,34,33,"ProgressRealmPromise"],[93,51,34,53],[93,52,34,54,"instances"],[93,61,34,63],[93,63,34,65],[94,10,34,65],[94,14,34,65,"_promiseRef$deref"],[94,31,34,65],[95,10,35,12],[95,11,35,12,"_promiseRef$deref"],[95,28,35,12],[95,31,35,12,"promiseRef"],[95,41,35,22],[95,42,35,23,"deref"],[95,47,35,28],[95,48,35,29],[95,49,35,30],[95,62,35,12,"_promiseRef$deref"],[95,79,35,12],[95,80,35,32,"cancel"],[95,86,35,38],[95,87,35,39],[95,88,35,40],[96,8,36,8],[97,8,37,8,"ProgressRealmPromise"],[97,28,37,28],[97,29,37,29,"instances"],[97,38,37,38],[97,39,37,39,"clear"],[97,44,37,44],[97,45,37,45],[97,46,37,46],[98,6,38,4],[99,4,38,5],[100,2,38,5],[101,2,27,4],[102,2,26,6,"ProgressRealmPromise"],[102,22,26,26],[102,23,28,11,"instances"],[102,32,28,20],[102,35,28,23],[102,39,28,27,"Set"],[102,42,28,30],[102,43,28,31],[102,44,28,32],[103,2,90,0,"exports"],[103,9,90,7],[103,10,90,8,"ProgressRealmPromise"],[103,30,90,28],[103,33,90,31,"ProgressRealmPromise"],[103,53,90,51],[104,0,90,52],[104,3]],"functionMap":{"names":["<global>","ProgressRealmPromise","cancelAll","constructor","cancel","rejectAsCanceled","get__@@toStringTag"],"mappings":"AAA;ACyB;ICO;KDK;IEW;KFe;IGM;KHO;IIK;KJG;IKC;KLE;CDC"}},"type":"js/module"}]}