{"dependencies":[{"name":"../types","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}},{"start":{"line":6,"column":16,"index":199},"end":{"line":6,"column":35,"index":218}}],"key":"2+h21LM/+NVMQKDHaRawSQRYYOQ="}},{"name":"../networks","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":121},"end":{"line":4,"column":41,"index":143}}],"key":"FiQD0tNYEY+NhtBSAnO78dixigg="}},{"name":"./lazy","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":233},"end":{"line":7,"column":30,"index":250}},{"start":{"line":7,"column":13,"index":233},"end":{"line":7,"column":30,"index":250}}],"key":"g4ye5UxsflvXhbFiS+2Co5sloz8="}},{"name":"../script","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":16,"index":161},"end":{"line":5,"column":36,"index":181}},{"start":{"line":8,"column":12,"index":264},"end":{"line":8,"column":23,"index":275}},{"start":{"line":5,"column":16,"index":161},"end":{"line":5,"column":36,"index":181}},{"start":{"line":5,"column":16,"index":161},"end":{"line":5,"column":36,"index":181}},{"start":{"line":8,"column":12,"index":264},"end":{"line":8,"column":23,"index":275}}],"key":"XOqjZpHZAfPtXF1u3MudqqFxY0c="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.p2data = void 0;\n  // output: OP_RETURN ...\n  /**\n   * Embeds data in a Bitcoin payment.\n   * @param a - The payment object.\n   * @param opts - Optional payment options.\n   * @returns The modified payment object.\n   * @throws {TypeError} If there is not enough data or if the output is invalid.\n   */\n  function p2data(a, opts) {\n    if (!a.data && !a.output) throw new TypeError('Not enough data');\n    opts = Object.assign({\n      validate: true\n    }, opts || {});\n    (0, _$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce)({\n      network: _$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.maybe(_$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.Object),\n      output: _$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.maybe(_$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.Buffer),\n      data: _$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.maybe(_$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.arrayOf(_$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.Buffer))\n    }, a);\n    var network = a.network || _$$_REQUIRE(_dependencyMap[1], \"../networks\").bitcoin;\n    var o = {\n      name: 'embed',\n      network: network\n    };\n    _$$_REQUIRE(_dependencyMap[2], \"./lazy\").prop(o, 'output', function () {\n      if (!a.data) return;\n      return _$$_REQUIRE(_dependencyMap[3], \"../script\").compile([_$$_REQUIRE(_dependencyMap[3], \"../script\").OPS.OP_RETURN].concat(a.data));\n    });\n    _$$_REQUIRE(_dependencyMap[2], \"./lazy\").prop(o, 'data', function () {\n      if (!a.output) return;\n      return _$$_REQUIRE(_dependencyMap[3], \"../script\").decompile(a.output).slice(1);\n    });\n    // extended validation\n    if (opts.validate) {\n      if (a.output) {\n        var chunks = _$$_REQUIRE(_dependencyMap[3], \"../script\").decompile(a.output);\n        if (chunks[0] !== _$$_REQUIRE(_dependencyMap[3], \"../script\").OPS.OP_RETURN) throw new TypeError('Output is invalid');\n        if (!chunks.slice(1).every(_$$_REQUIRE(_dependencyMap[0], \"../types\").typeforce.Buffer)) throw new TypeError('Output is invalid');\n        if (a.data && !(0, _$$_REQUIRE(_dependencyMap[0], \"../types\").stacksEqual)(a.data, o.data)) throw new TypeError('Data mismatch');\n      }\n    }\n    return Object.assign(o, a);\n  }\n  exports.p2data = p2data;\n});","lineCount":51,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"p2data"],[7,16,3,14],[7,19,3,17],[7,24,3,22],[7,25,3,23],[8,2,9,0],[9,2,10,0],[10,0,11,0],[11,0,12,0],[12,0,13,0],[13,0,14,0],[14,0,15,0],[15,0,16,0],[16,2,17,0],[16,11,17,9,"p2data"],[16,17,17,15,"p2data"],[16,18,17,16,"a"],[16,19,17,17],[16,21,17,19,"opts"],[16,25,17,23],[16,27,17,25],[17,4,18,2],[17,8,18,6],[17,9,18,7,"a"],[17,10,18,8],[17,11,18,9,"data"],[17,15,18,13],[17,19,18,17],[17,20,18,18,"a"],[17,21,18,19],[17,22,18,20,"output"],[17,28,18,26],[17,30,18,28],[17,36,18,34],[17,40,18,38,"TypeError"],[17,49,18,47],[17,50,18,48],[17,67,18,65],[17,68,18,66],[18,4,19,2,"opts"],[18,8,19,6],[18,11,19,9,"Object"],[18,17,19,15],[18,18,19,16,"assign"],[18,24,19,22],[18,25,19,23],[19,6,19,25,"validate"],[19,14,19,33],[19,16,19,35],[20,4,19,40],[20,5,19,41],[20,7,19,43,"opts"],[20,11,19,47],[20,15,19,51],[20,16,19,52],[20,17,19,53],[20,18,19,54],[21,4,20,2],[21,5,20,3],[21,6,20,4],[21,8,20,6,"_$$_REQUIRE"],[21,19,20,6],[21,20,20,6,"_dependencyMap"],[21,34,20,6],[21,51,20,14,"typeforce"],[21,60,20,23],[21,62,21,4],[22,6,22,6,"network"],[22,13,22,13],[22,15,22,15,"_$$_REQUIRE"],[22,26,22,15],[22,27,22,15,"_dependencyMap"],[22,41,22,15],[22,58,22,23,"typeforce"],[22,67,22,32],[22,68,22,33,"maybe"],[22,73,22,38],[22,74,22,39,"_$$_REQUIRE"],[22,85,22,39],[22,86,22,39,"_dependencyMap"],[22,100,22,39],[22,117,22,47,"typeforce"],[22,126,22,56],[22,127,22,57,"Object"],[22,133,22,63],[22,134,22,64],[23,6,23,6,"output"],[23,12,23,12],[23,14,23,14,"_$$_REQUIRE"],[23,25,23,14],[23,26,23,14,"_dependencyMap"],[23,40,23,14],[23,57,23,22,"typeforce"],[23,66,23,31],[23,67,23,32,"maybe"],[23,72,23,37],[23,73,23,38,"_$$_REQUIRE"],[23,84,23,38],[23,85,23,38,"_dependencyMap"],[23,99,23,38],[23,116,23,46,"typeforce"],[23,125,23,55],[23,126,23,56,"Buffer"],[23,132,23,62],[23,133,23,63],[24,6,24,6,"data"],[24,10,24,10],[24,12,24,12,"_$$_REQUIRE"],[24,23,24,12],[24,24,24,12,"_dependencyMap"],[24,38,24,12],[24,55,24,20,"typeforce"],[24,64,24,29],[24,65,24,30,"maybe"],[24,70,24,35],[24,71,25,8,"_$$_REQUIRE"],[24,82,25,8],[24,83,25,8,"_dependencyMap"],[24,97,25,8],[24,114,25,16,"typeforce"],[24,123,25,25],[24,124,25,26,"arrayOf"],[24,131,25,33],[24,132,25,34,"_$$_REQUIRE"],[24,143,25,34],[24,144,25,34,"_dependencyMap"],[24,158,25,34],[24,175,25,42,"typeforce"],[24,184,25,51],[24,185,25,52,"Buffer"],[24,191,25,58],[24,192,26,6],[25,4,27,4],[25,5,27,5],[25,7,28,4,"a"],[25,8,29,2],[25,9,29,3],[26,4,30,2],[26,8,30,8,"network"],[26,15,30,15],[26,18,30,18,"a"],[26,19,30,19],[26,20,30,20,"network"],[26,27,30,27],[26,31,30,31,"_$$_REQUIRE"],[26,42,30,31],[26,43,30,31,"_dependencyMap"],[26,57,30,31],[26,77,30,42,"bitcoin"],[26,84,30,49],[27,4,31,2],[27,8,31,8,"o"],[27,9,31,9],[27,12,31,12],[28,6,31,14,"name"],[28,10,31,18],[28,12,31,20],[28,19,31,27],[29,6,31,29,"network"],[29,13,31,36],[29,15,31,29,"network"],[30,4,31,37],[30,5,31,38],[31,4,32,2,"_$$_REQUIRE"],[31,15,32,2],[31,16,32,2,"_dependencyMap"],[31,30,32,2],[31,45,32,7,"prop"],[31,49,32,11],[31,50,32,12,"o"],[31,51,32,13],[31,53,32,15],[31,61,32,23],[31,63,32,25],[31,75,32,31],[32,6,33,4],[32,10,33,8],[32,11,33,9,"a"],[32,12,33,10],[32,13,33,11,"data"],[32,17,33,15],[32,19,33,17],[33,6,34,4],[33,13,34,11,"_$$_REQUIRE"],[33,24,34,11],[33,25,34,11,"_dependencyMap"],[33,39,34,11],[33,57,34,19,"compile"],[33,64,34,26],[33,65,34,27],[33,66,34,28,"_$$_REQUIRE"],[33,77,34,28],[33,78,34,28,"_dependencyMap"],[33,92,34,28],[33,110,34,28,"OPS"],[33,113,34,28],[33,114,34,32,"OP_RETURN"],[33,123,34,41],[33,124,34,42],[33,125,34,43,"concat"],[33,131,34,49],[33,132,34,50,"a"],[33,133,34,51],[33,134,34,52,"data"],[33,138,34,56],[33,139,34,57],[33,140,34,58],[34,4,35,2],[34,5,35,3],[34,6,35,4],[35,4,36,2,"_$$_REQUIRE"],[35,15,36,2],[35,16,36,2,"_dependencyMap"],[35,30,36,2],[35,45,36,7,"prop"],[35,49,36,11],[35,50,36,12,"o"],[35,51,36,13],[35,53,36,15],[35,59,36,21],[35,61,36,23],[35,73,36,29],[36,6,37,4],[36,10,37,8],[36,11,37,9,"a"],[36,12,37,10],[36,13,37,11,"output"],[36,19,37,17],[36,21,37,19],[37,6,38,4],[37,13,38,11,"_$$_REQUIRE"],[37,24,38,11],[37,25,38,11,"_dependencyMap"],[37,39,38,11],[37,57,38,19,"decompile"],[37,66,38,28],[37,67,38,29,"a"],[37,68,38,30],[37,69,38,31,"output"],[37,75,38,37],[37,76,38,38],[37,77,38,39,"slice"],[37,82,38,44],[37,83,38,45],[37,84,38,46],[37,85,38,47],[38,4,39,2],[38,5,39,3],[38,6,39,4],[39,4,40,2],[40,4,41,2],[40,8,41,6,"opts"],[40,12,41,10],[40,13,41,11,"validate"],[40,21,41,19],[40,23,41,21],[41,6,42,4],[41,10,42,8,"a"],[41,11,42,9],[41,12,42,10,"output"],[41,18,42,16],[41,20,42,18],[42,8,43,6],[42,12,43,12,"chunks"],[42,18,43,18],[42,21,43,21,"_$$_REQUIRE"],[42,32,43,21],[42,33,43,21,"_dependencyMap"],[42,47,43,21],[42,65,43,29,"decompile"],[42,74,43,38],[42,75,43,39,"a"],[42,76,43,40],[42,77,43,41,"output"],[42,83,43,47],[42,84,43,48],[43,8,44,6],[43,12,44,10,"chunks"],[43,18,44,16],[43,19,44,17],[43,20,44,18],[43,21,44,19],[43,26,44,24,"_$$_REQUIRE"],[43,37,44,24],[43,38,44,24,"_dependencyMap"],[43,52,44,24],[43,70,44,24,"OPS"],[43,73,44,24],[43,74,44,28,"OP_RETURN"],[43,83,44,37],[43,85,44,39],[43,91,44,45],[43,95,44,49,"TypeError"],[43,104,44,58],[43,105,44,59],[43,124,44,78],[43,125,44,79],[44,8,45,6],[44,12,45,10],[44,13,45,11,"chunks"],[44,19,45,17],[44,20,45,18,"slice"],[44,25,45,23],[44,26,45,24],[44,27,45,25],[44,28,45,26],[44,29,45,27,"every"],[44,34,45,32],[44,35,45,33,"_$$_REQUIRE"],[44,46,45,33],[44,47,45,33,"_dependencyMap"],[44,61,45,33],[44,78,45,41,"typeforce"],[44,87,45,50],[44,88,45,51,"Buffer"],[44,94,45,57],[44,95,45,58],[44,97,46,8],[44,103,46,14],[44,107,46,18,"TypeError"],[44,116,46,27],[44,117,46,28],[44,136,46,47],[44,137,46,48],[45,8,47,6],[45,12,47,10,"a"],[45,13,47,11],[45,14,47,12,"data"],[45,18,47,16],[45,22,47,20],[45,23,47,21],[45,24,47,22],[45,25,47,23],[45,27,47,25,"_$$_REQUIRE"],[45,38,47,25],[45,39,47,25,"_dependencyMap"],[45,53,47,25],[45,70,47,33,"stacksEqual"],[45,81,47,44],[45,83,47,46,"a"],[45,84,47,47],[45,85,47,48,"data"],[45,89,47,52],[45,91,47,54,"o"],[45,92,47,55],[45,93,47,56,"data"],[45,97,47,60],[45,98,47,61],[45,100,48,8],[45,106,48,14],[45,110,48,18,"TypeError"],[45,119,48,27],[45,120,48,28],[45,135,48,43],[45,136,48,44],[46,6,49,4],[47,4,50,2],[48,4,51,2],[48,11,51,9,"Object"],[48,17,51,15],[48,18,51,16,"assign"],[48,24,51,22],[48,25,51,23,"o"],[48,26,51,24],[48,28,51,26,"a"],[48,29,51,27],[48,30,51,28],[49,2,52,0],[50,2,53,0,"exports"],[50,9,53,7],[50,10,53,8,"p2data"],[50,16,53,14],[50,19,53,17,"p2data"],[50,25,53,23],[51,0,53,24],[51,3]],"functionMap":{"names":["<global>","p2data","lazy.prop$argument_2"],"mappings":"AAA;ACgB;yBCe;GDG;uBCC;GDG;CDa"}},"type":"js/module"}]}