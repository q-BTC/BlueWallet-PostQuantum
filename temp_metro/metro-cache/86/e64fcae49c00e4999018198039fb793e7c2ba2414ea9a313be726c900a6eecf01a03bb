{"dependencies":[{"name":"./async-every","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":13,"index":13},"end":{"line":1,"column":37,"index":37}}],"key":"xyZCwmT71WmIEYk0z4ptI01cstg="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  module.exports = function (callbacks, event, onCallbackError, cb) {\n    // This function is how we support different kinds of callback:\n    //  - synchronous - return value\n    //  - node-style async with callback - cb(err, value)\n    //  - promise/thenable - resolve(value)\n    // It normalises each of these into the lowest common denominator – a node-style callback\n    var runMaybeAsyncCallback = function runMaybeAsyncCallback(fn, cb) {\n      if (typeof fn !== 'function') return cb(null);\n      try {\n        // if function appears sync…\n        if (fn.length !== 2) {\n          var ret = fn(event);\n          // check if it returned a \"thenable\" (promise)\n          if (ret && typeof ret.then === 'function') {\n            return ret.then(\n            // resolve\n            function (val) {\n              return setTimeout(function () {\n                return cb(null, val);\n              });\n            },\n            // reject\n            function (err) {\n              setTimeout(function () {\n                onCallbackError(err);\n                return cb(null, true);\n              });\n            });\n          }\n          return cb(null, ret);\n        }\n        // if function is async…\n        fn(event, function (err, result) {\n          if (err) {\n            onCallbackError(err);\n            return cb(null);\n          }\n          cb(null, result);\n        });\n      } catch (e) {\n        onCallbackError(e);\n        cb(null);\n      }\n    };\n    _$$_REQUIRE(_dependencyMap[0], \"./async-every\")(callbacks, runMaybeAsyncCallback, cb);\n  };\n});","lineCount":48,"map":[[2,2,3,0,"module"],[2,8,3,6],[2,9,3,7,"exports"],[2,16,3,14],[2,19,3,17],[2,29,3,18,"callbacks"],[2,38,3,27],[2,40,3,29,"event"],[2,45,3,34],[2,47,3,36,"onCallbackError"],[2,62,3,51],[2,64,3,53,"cb"],[2,66,3,55],[2,68,3,60],[3,4,4,2],[4,4,5,2],[5,4,6,2],[6,4,7,2],[7,4,8,2],[8,4,9,2],[8,8,9,8,"runMaybeAsyncCallback"],[8,29,9,29],[8,32,9,32],[8,41,9,8,"runMaybeAsyncCallback"],[8,62,9,29,"runMaybeAsyncCallback"],[8,63,9,33,"fn"],[8,65,9,35],[8,67,9,37,"cb"],[8,69,9,39],[8,71,9,44],[9,6,10,4],[9,10,10,8],[9,17,10,15,"fn"],[9,19,10,17],[9,24,10,22],[9,34,10,32],[9,36,10,34],[9,43,10,41,"cb"],[9,45,10,43],[9,46,10,44],[9,50,10,48],[9,51,10,49],[10,6,11,4],[10,10,11,8],[11,8,12,6],[12,8,13,6],[12,12,13,10,"fn"],[12,14,13,12],[12,15,13,13,"length"],[12,21,13,19],[12,26,13,24],[12,27,13,25],[12,29,13,27],[13,10,14,8],[13,14,14,14,"ret"],[13,17,14,17],[13,20,14,20,"fn"],[13,22,14,22],[13,23,14,23,"event"],[13,28,14,28],[13,29,14,29],[14,10,15,8],[15,10,16,8],[15,14,16,12,"ret"],[15,17,16,15],[15,21,16,19],[15,28,16,26,"ret"],[15,31,16,29],[15,32,16,30,"then"],[15,36,16,34],[15,41,16,39],[15,51,16,49],[15,53,16,51],[16,12,17,10],[16,19,17,17,"ret"],[16,22,17,20],[16,23,17,21,"then"],[16,27,17,25],[17,12,18,12],[18,12,19,12],[18,22,19,12,"val"],[18,25,19,15],[19,14,19,15],[19,21,19,19,"setTimeout"],[19,31,19,29],[19,32,19,30],[20,16,19,30],[20,23,19,36,"cb"],[20,25,19,38],[20,26,19,39],[20,30,19,43],[20,32,19,45,"val"],[20,35,19,48],[20,36,19,49],[21,14,19,49],[21,16,19,50],[22,12,19,50],[23,12,20,12],[24,12,21,12],[24,22,21,12,"err"],[24,25,21,15],[24,27,21,19],[25,14,22,14,"setTimeout"],[25,24,22,24],[25,25,22,25],[25,37,22,31],[26,16,23,16,"onCallbackError"],[26,31,23,31],[26,32,23,32,"err"],[26,35,23,35],[26,36,23,36],[27,16,24,16],[27,23,24,23,"cb"],[27,25,24,25],[27,26,24,26],[27,30,24,30],[27,32,24,32],[27,36,24,36],[27,37,24,37],[28,14,25,14],[28,15,25,15],[28,16,25,16],[29,12,26,12],[29,13,27,10],[29,14,27,11],[30,10,28,8],[31,10,29,8],[31,17,29,15,"cb"],[31,19,29,17],[31,20,29,18],[31,24,29,22],[31,26,29,24,"ret"],[31,29,29,27],[31,30,29,28],[32,8,30,6],[33,8,31,6],[34,8,32,6,"fn"],[34,10,32,8],[34,11,32,9,"event"],[34,16,32,14],[34,18,32,16],[34,28,32,17,"err"],[34,31,32,20],[34,33,32,22,"result"],[34,39,32,28],[34,41,32,33],[35,10,33,8],[35,14,33,12,"err"],[35,17,33,15],[35,19,33,17],[36,12,34,10,"onCallbackError"],[36,27,34,25],[36,28,34,26,"err"],[36,31,34,29],[36,32,34,30],[37,12,35,10],[37,19,35,17,"cb"],[37,21,35,19],[37,22,35,20],[37,26,35,24],[37,27,35,25],[38,10,36,8],[39,10,37,8,"cb"],[39,12,37,10],[39,13,37,11],[39,17,37,15],[39,19,37,17,"result"],[39,25,37,23],[39,26,37,24],[40,8,38,6],[40,9,38,7],[40,10,38,8],[41,6,39,4],[41,7,39,5],[41,8,39,6],[41,15,39,13,"e"],[41,16,39,14],[41,18,39,16],[42,8,40,6,"onCallbackError"],[42,23,40,21],[42,24,40,22,"e"],[42,25,40,23],[42,26,40,24],[43,8,41,6,"cb"],[43,10,41,8],[43,11,41,9],[43,15,41,13],[43,16,41,14],[44,6,42,4],[45,4,43,2],[45,5,43,3],[46,4,45,2,"_$$_REQUIRE"],[46,15,45,2],[46,16,45,2,"_dependencyMap"],[46,30,45,2],[46,52,45,7,"callbacks"],[46,61,45,16],[46,63,45,18,"runMaybeAsyncCallback"],[46,84,45,39],[46,86,45,41,"cb"],[46,88,45,43],[46,89,45,44],[47,2,46,0],[47,3,46,1],[48,0,46,1],[48,3]],"functionMap":{"names":["<global>","module.exports","runMaybeAsyncCallback","ret.then$argument_0","setTimeout$argument_0","ret.then$argument_1","fn$argument_1"],"mappings":"AAA;iBCE;gCCM;YCU,kBC,mBD,CD;YGE;yBDC;eCG;aHC;gBIM;OJM;GDK;CDG"}},"type":"js/module"}]}