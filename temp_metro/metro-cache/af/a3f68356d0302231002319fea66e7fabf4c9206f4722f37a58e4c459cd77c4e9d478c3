{"dependencies":[],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var precomputeAlias = function precomputeAlias(p, n) {\n    var sum = p.reduce(function (acc, val) {\n      if (val < 0) {\n        throw new Error('Probability must be a positive: p[' + p.indexOf(val) + ']=' + val);\n      }\n      return acc + val;\n    }, 0);\n    if (sum === 0) {\n      throw new Error('Probability sum must be greater than zero.');\n    }\n    var scaledProbabilities = p.map(function (prob) {\n      return prob * n / sum;\n    });\n    var aliasData = {\n      prob: new Array(n),\n      alias: new Array(n)\n    };\n    var small = [];\n    var large = [];\n    for (var i = n - 1; i >= 0; i--) {\n      if (scaledProbabilities[i] < 1) {\n        small.push(i);\n      } else {\n        large.push(i);\n      }\n    }\n    while (small.length > 0 && large.length > 0) {\n      var less = small.pop();\n      var more = large.pop();\n      aliasData.prob[less] = scaledProbabilities[less];\n      aliasData.alias[less] = more;\n      scaledProbabilities[more] = scaledProbabilities[more] + scaledProbabilities[less] - 1;\n      if (scaledProbabilities[more] < 1) {\n        small.push(more);\n      } else {\n        large.push(more);\n      }\n    }\n    while (large.length > 0) {\n      aliasData.prob[large.pop()] = 1;\n    }\n    while (small.length > 0) {\n      aliasData.prob[small.pop()] = 1;\n    }\n    return aliasData;\n  };\n  var draw = function draw(aliasData, outcomes, rng) {\n    var c = Math.floor(rng() * aliasData.prob.length);\n    return outcomes[rng() < aliasData.prob[c] ? c : aliasData.alias[c]];\n  };\n  var _next = function next(aliasData, outcomes, rng, numOfSamples) {\n    if (numOfSamples === void 0) {\n      numOfSamples = 1;\n    }\n    if (numOfSamples === 1) {\n      return draw(aliasData, outcomes, rng);\n    }\n    var samples = [];\n    for (var i = 0; i < numOfSamples; i++) {\n      samples.push(draw(aliasData, outcomes, rng));\n    }\n    return samples;\n  };\n  var sample = function sample(probabilities, outcomes, rng) {\n    if (rng === void 0) {\n      rng = Math.random;\n    }\n    if (!Array.isArray(probabilities)) {\n      throw new Error('Probabilities must be an array.');\n    }\n    if (probabilities.length === 0) {\n      throw new Error('Probabilities array must not be empty.');\n    }\n    var n = probabilities.length;\n    var indexedOutcomes = outcomes !== null && outcomes !== void 0 ? outcomes : Array.from({\n      length: n\n    }, function (_, i) {\n      return i;\n    });\n    var aliasData = precomputeAlias(probabilities, n);\n    return {\n      next: function next(numOfSamples) {\n        if (numOfSamples === void 0) {\n          numOfSamples = 1;\n        }\n        return _next(aliasData, indexedOutcomes, rng, numOfSamples);\n      }\n    };\n  };\n  exports.default = sample;\n});","lineCount":97,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0],[7,6,3,4,"precomputeAlias"],[7,21,3,19],[7,24,3,22],[7,33,3,4,"precomputeAlias"],[7,48,3,19,"precomputeAlias"],[7,49,3,32,"p"],[7,50,3,33],[7,52,3,35,"n"],[7,53,3,36],[7,55,3,38],[8,4,4,4],[8,8,4,8,"sum"],[8,11,4,11],[8,14,4,14,"p"],[8,15,4,15],[8,16,4,16,"reduce"],[8,22,4,22],[8,23,4,23],[8,33,4,33,"acc"],[8,36,4,36],[8,38,4,38,"val"],[8,41,4,41],[8,43,4,43],[9,6,5,8],[9,10,5,12,"val"],[9,13,5,15],[9,16,5,18],[9,17,5,19],[9,19,5,21],[10,8,6,12],[10,14,6,18],[10,18,6,22,"Error"],[10,23,6,27],[10,24,6,28],[10,60,6,64],[10,63,6,67,"p"],[10,64,6,68],[10,65,6,69,"indexOf"],[10,72,6,76],[10,73,6,77,"val"],[10,76,6,80],[10,77,6,81],[10,80,6,84],[10,84,6,88],[10,87,6,91,"val"],[10,90,6,94],[10,91,6,95],[11,6,7,8],[12,6,8,8],[12,13,8,15,"acc"],[12,16,8,18],[12,19,8,21,"val"],[12,22,8,24],[13,4,9,4],[13,5,9,5],[13,7,9,7],[13,8,9,8],[13,9,9,9],[14,4,10,4],[14,8,10,8,"sum"],[14,11,10,11],[14,16,10,16],[14,17,10,17],[14,19,10,19],[15,6,11,8],[15,12,11,14],[15,16,11,18,"Error"],[15,21,11,23],[15,22,11,24],[15,66,11,68],[15,67,11,69],[16,4,12,4],[17,4,13,4],[17,8,13,8,"scaledProbabilities"],[17,27,13,27],[17,30,13,30,"p"],[17,31,13,31],[17,32,13,32,"map"],[17,35,13,35],[17,36,13,36],[17,46,13,46,"prob"],[17,50,13,50],[17,52,13,52],[18,6,13,54],[18,13,13,62,"prob"],[18,17,13,66],[18,20,13,69,"n"],[18,21,13,70],[18,24,13,74,"sum"],[18,27,13,77],[19,4,13,79],[19,5,13,80],[19,6,13,81],[20,4,14,4],[20,8,14,8,"aliasData"],[20,17,14,17],[20,20,14,20],[21,6,14,22,"prob"],[21,10,14,26],[21,12,14,28],[21,16,14,32,"Array"],[21,21,14,37],[21,22,14,38,"n"],[21,23,14,39],[21,24,14,40],[22,6,14,42,"alias"],[22,11,14,47],[22,13,14,49],[22,17,14,53,"Array"],[22,22,14,58],[22,23,14,59,"n"],[22,24,14,60],[23,4,14,62],[23,5,14,63],[24,4,15,4],[24,8,15,8,"small"],[24,13,15,13],[24,16,15,16],[24,18,15,18],[25,4,16,4],[25,8,16,8,"large"],[25,13,16,13],[25,16,16,16],[25,18,16,18],[26,4,17,4],[26,9,17,9],[26,13,17,13,"i"],[26,14,17,14],[26,17,17,17,"n"],[26,18,17,18],[26,21,17,21],[26,22,17,22],[26,24,17,24,"i"],[26,25,17,25],[26,29,17,29],[26,30,17,30],[26,32,17,32,"i"],[26,33,17,33],[26,35,17,35],[26,37,17,37],[27,6,18,8],[27,10,18,12,"scaledProbabilities"],[27,29,18,31],[27,30,18,32,"i"],[27,31,18,33],[27,32,18,34],[27,35,18,37],[27,36,18,38],[27,38,18,40],[28,8,19,12,"small"],[28,13,19,17],[28,14,19,18,"push"],[28,18,19,22],[28,19,19,23,"i"],[28,20,19,24],[28,21,19,25],[29,6,20,8],[29,7,20,9],[29,13,21,13],[30,8,22,12,"large"],[30,13,22,17],[30,14,22,18,"push"],[30,18,22,22],[30,19,22,23,"i"],[30,20,22,24],[30,21,22,25],[31,6,23,8],[32,4,24,4],[33,4,25,4],[33,11,25,11,"small"],[33,16,25,16],[33,17,25,17,"length"],[33,23,25,23],[33,26,25,26],[33,27,25,27],[33,31,25,31,"large"],[33,36,25,36],[33,37,25,37,"length"],[33,43,25,43],[33,46,25,46],[33,47,25,47],[33,49,25,49],[34,6,26,8],[34,10,26,12,"less"],[34,14,26,16],[34,17,26,19,"small"],[34,22,26,24],[34,23,26,25,"pop"],[34,26,26,28],[34,27,26,29],[34,28,26,30],[35,6,27,8],[35,10,27,12,"more"],[35,14,27,16],[35,17,27,19,"large"],[35,22,27,24],[35,23,27,25,"pop"],[35,26,27,28],[35,27,27,29],[35,28,27,30],[36,6,28,8,"aliasData"],[36,15,28,17],[36,16,28,18,"prob"],[36,20,28,22],[36,21,28,23,"less"],[36,25,28,27],[36,26,28,28],[36,29,28,31,"scaledProbabilities"],[36,48,28,50],[36,49,28,51,"less"],[36,53,28,55],[36,54,28,56],[37,6,29,8,"aliasData"],[37,15,29,17],[37,16,29,18,"alias"],[37,21,29,23],[37,22,29,24,"less"],[37,26,29,28],[37,27,29,29],[37,30,29,32,"more"],[37,34,29,36],[38,6,30,8,"scaledProbabilities"],[38,25,30,27],[38,26,30,28,"more"],[38,30,30,32],[38,31,30,33],[38,34,30,37,"scaledProbabilities"],[38,53,30,56],[38,54,30,57,"more"],[38,58,30,61],[38,59,30,62],[38,62,30,65,"scaledProbabilities"],[38,81,30,84],[38,82,30,85,"less"],[38,86,30,89],[38,87,30,90],[38,90,30,94],[38,91,30,95],[39,6,31,8],[39,10,31,12,"scaledProbabilities"],[39,29,31,31],[39,30,31,32,"more"],[39,34,31,36],[39,35,31,37],[39,38,31,40],[39,39,31,41],[39,41,31,43],[40,8,32,12,"small"],[40,13,32,17],[40,14,32,18,"push"],[40,18,32,22],[40,19,32,23,"more"],[40,23,32,27],[40,24,32,28],[41,6,33,8],[41,7,33,9],[41,13,34,13],[42,8,35,12,"large"],[42,13,35,17],[42,14,35,18,"push"],[42,18,35,22],[42,19,35,23,"more"],[42,23,35,27],[42,24,35,28],[43,6,36,8],[44,4,37,4],[45,4,38,4],[45,11,38,11,"large"],[45,16,38,16],[45,17,38,17,"length"],[45,23,38,23],[45,26,38,26],[45,27,38,27],[45,29,38,29],[46,6,39,8,"aliasData"],[46,15,39,17],[46,16,39,18,"prob"],[46,20,39,22],[46,21,39,23,"large"],[46,26,39,28],[46,27,39,29,"pop"],[46,30,39,32],[46,31,39,33],[46,32,39,34],[46,33,39,35],[46,36,39,38],[46,37,39,39],[47,4,40,4],[48,4,41,4],[48,11,41,11,"small"],[48,16,41,16],[48,17,41,17,"length"],[48,23,41,23],[48,26,41,26],[48,27,41,27],[48,29,41,29],[49,6,42,8,"aliasData"],[49,15,42,17],[49,16,42,18,"prob"],[49,20,42,22],[49,21,42,23,"small"],[49,26,42,28],[49,27,42,29,"pop"],[49,30,42,32],[49,31,42,33],[49,32,42,34],[49,33,42,35],[49,36,42,38],[49,37,42,39],[50,4,43,4],[51,4,44,4],[51,11,44,11,"aliasData"],[51,20,44,20],[52,2,45,0],[52,3,45,1],[53,2,46,0],[53,6,46,4,"draw"],[53,10,46,8],[53,13,46,11],[53,22,46,4,"draw"],[53,26,46,8,"draw"],[53,27,46,21,"aliasData"],[53,36,46,30],[53,38,46,32,"outcomes"],[53,46,46,40],[53,48,46,42,"rng"],[53,51,46,45],[53,53,46,47],[54,4,47,4],[54,8,47,8,"c"],[54,9,47,9],[54,12,47,12,"Math"],[54,16,47,16],[54,17,47,17,"floor"],[54,22,47,22],[54,23,47,23,"rng"],[54,26,47,26],[54,27,47,27],[54,28,47,28],[54,31,47,31,"aliasData"],[54,40,47,40],[54,41,47,41,"prob"],[54,45,47,45],[54,46,47,46,"length"],[54,52,47,52],[54,53,47,53],[55,4,48,4],[55,11,48,11,"outcomes"],[55,19,48,19],[55,20,48,21,"rng"],[55,23,48,24],[55,24,48,25],[55,25,48,26],[55,28,48,29,"aliasData"],[55,37,48,38],[55,38,48,39,"prob"],[55,42,48,43],[55,43,48,44,"c"],[55,44,48,45],[55,45,48,46],[55,48,48,50,"c"],[55,49,48,51],[55,52,48,54,"aliasData"],[55,61,48,63],[55,62,48,64,"alias"],[55,67,48,69],[55,68,48,70,"c"],[55,69,48,71],[55,70,48,72],[55,71,48,73],[56,2,49,0],[56,3,49,1],[57,2,50,0],[57,6,50,4,"next"],[57,11,50,8],[57,14,50,11],[57,23,50,4,"next"],[57,27,50,8,"next"],[57,28,50,21,"aliasData"],[57,37,50,30],[57,39,50,32,"outcomes"],[57,47,50,40],[57,49,50,42,"rng"],[57,52,50,45],[57,54,50,47,"numOfSamples"],[57,66,50,59],[57,68,50,61],[58,4,51,4],[58,8,51,8,"numOfSamples"],[58,20,51,20],[58,25,51,25],[58,30,51,30],[58,31,51,31],[58,33,51,33],[59,6,51,35,"numOfSamples"],[59,18,51,47],[59,21,51,50],[59,22,51,51],[60,4,51,53],[61,4,52,4],[61,8,52,8,"numOfSamples"],[61,20,52,20],[61,25,52,25],[61,26,52,26],[61,28,52,28],[62,6,53,8],[62,13,53,15,"draw"],[62,17,53,19],[62,18,53,20,"aliasData"],[62,27,53,29],[62,29,53,31,"outcomes"],[62,37,53,39],[62,39,53,41,"rng"],[62,42,53,44],[62,43,53,45],[63,4,54,4],[64,4,55,4],[64,8,55,8,"samples"],[64,15,55,15],[64,18,55,18],[64,20,55,20],[65,4,56,4],[65,9,56,9],[65,13,56,13,"i"],[65,14,56,14],[65,17,56,17],[65,18,56,18],[65,20,56,20,"i"],[65,21,56,21],[65,24,56,24,"numOfSamples"],[65,36,56,36],[65,38,56,38,"i"],[65,39,56,39],[65,41,56,41],[65,43,56,43],[66,6,57,8,"samples"],[66,13,57,15],[66,14,57,16,"push"],[66,18,57,20],[66,19,57,21,"draw"],[66,23,57,25],[66,24,57,26,"aliasData"],[66,33,57,35],[66,35,57,37,"outcomes"],[66,43,57,45],[66,45,57,47,"rng"],[66,48,57,50],[66,49,57,51],[66,50,57,52],[67,4,58,4],[68,4,59,4],[68,11,59,11,"samples"],[68,18,59,18],[69,2,60,0],[69,3,60,1],[70,2,61,0],[70,6,61,4,"sample"],[70,12,61,10],[70,15,61,13],[70,24,61,4,"sample"],[70,30,61,10,"sample"],[70,31,61,23,"probabilities"],[70,44,61,36],[70,46,61,38,"outcomes"],[70,54,61,46],[70,56,61,48,"rng"],[70,59,61,51],[70,61,61,53],[71,4,62,4],[71,8,62,8,"rng"],[71,11,62,11],[71,16,62,16],[71,21,62,21],[71,22,62,22],[71,24,62,24],[72,6,62,26,"rng"],[72,9,62,29],[72,12,62,32,"Math"],[72,16,62,36],[72,17,62,37,"random"],[72,23,62,43],[73,4,62,45],[74,4,63,4],[74,8,63,8],[74,9,63,9,"Array"],[74,14,63,14],[74,15,63,15,"isArray"],[74,22,63,22],[74,23,63,23,"probabilities"],[74,36,63,36],[74,37,63,37],[74,39,63,39],[75,6,64,8],[75,12,64,14],[75,16,64,18,"Error"],[75,21,64,23],[75,22,64,24],[75,55,64,57],[75,56,64,58],[76,4,65,4],[77,4,66,4],[77,8,66,8,"probabilities"],[77,21,66,21],[77,22,66,22,"length"],[77,28,66,28],[77,33,66,33],[77,34,66,34],[77,36,66,36],[78,6,67,8],[78,12,67,14],[78,16,67,18,"Error"],[78,21,67,23],[78,22,67,24],[78,62,67,64],[78,63,67,65],[79,4,68,4],[80,4,69,4],[80,8,69,8,"n"],[80,9,69,9],[80,12,69,12,"probabilities"],[80,25,69,25],[80,26,69,26,"length"],[80,32,69,32],[81,4,70,4],[81,8,70,8,"indexedOutcomes"],[81,23,70,23],[81,26,70,26,"outcomes"],[81,34,70,34],[81,39,70,39],[81,43,70,43],[81,47,70,47,"outcomes"],[81,55,70,55],[81,60,70,60],[81,65,70,65],[81,66,70,66],[81,69,70,69,"outcomes"],[81,77,70,77],[81,80,70,80,"Array"],[81,85,70,85],[81,86,70,86,"from"],[81,90,70,90],[81,91,70,91],[82,6,70,93,"length"],[82,12,70,99],[82,14,70,101,"n"],[83,4,70,103],[83,5,70,104],[83,7,70,106],[83,17,70,116,"_"],[83,18,70,117],[83,20,70,119,"i"],[83,21,70,120],[83,23,70,122],[84,6,70,124],[84,13,70,131,"i"],[84,14,70,132],[85,4,70,134],[85,5,70,135],[85,6,70,136],[86,4,71,4],[86,8,71,8,"aliasData"],[86,17,71,17],[86,20,71,20,"precomputeAlias"],[86,35,71,35],[86,36,71,36,"probabilities"],[86,49,71,49],[86,51,71,51,"n"],[86,52,71,52],[86,53,71,53],[87,4,72,4],[87,11,72,11],[88,6,73,8,"next"],[88,10,73,12],[88,12,73,14],[88,21,73,8,"next"],[88,25,73,12,"next"],[88,26,73,24,"numOfSamples"],[88,38,73,36],[88,40,73,38],[89,8,74,12],[89,12,74,16,"numOfSamples"],[89,24,74,28],[89,29,74,33],[89,34,74,38],[89,35,74,39],[89,37,74,41],[90,10,74,43,"numOfSamples"],[90,22,74,55],[90,25,74,58],[90,26,74,59],[91,8,74,61],[92,8,75,12],[92,15,75,19,"next"],[92,20,75,23],[92,21,75,24,"aliasData"],[92,30,75,33],[92,32,75,35,"indexedOutcomes"],[92,47,75,50],[92,49,75,52,"rng"],[92,52,75,55],[92,54,75,57,"numOfSamples"],[92,66,75,69],[92,67,75,70],[93,6,76,8],[94,4,77,4],[94,5,77,5],[95,2,78,0],[95,3,78,1],[96,2,79,0,"exports"],[96,9,79,7],[96,10,79,8,"default"],[96,17,79,15],[96,20,79,18,"sample"],[96,26,79,24],[97,0,79,25],[97,3]],"functionMap":{"names":["<global>","precomputeAlias","p.reduce$argument_0","p.map$argument_0","draw","next","sample","Array.from$argument_1"],"mappings":"AAA;sBCE;uBCC;KDK;oCEI,4CF;CDgC;WIC;CJG;WKC;CLU;aMC;0GCS,6BD;cDG;SCG;CNE"}},"type":"js/module"}]}