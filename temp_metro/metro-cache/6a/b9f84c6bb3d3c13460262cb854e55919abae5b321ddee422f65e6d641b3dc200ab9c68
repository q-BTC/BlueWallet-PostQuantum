{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":91,"column":43,"index":3282}}],"key":"yg7e6laZwmpbIvId5jovq9ugXp8="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":91,"column":43,"index":3282}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30="}},{"name":"./Listeners","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":20,"index":914},"end":{"line":22,"column":42,"index":936}}],"key":"Lyc5LnFOVXez1m1NeKX75hk2t24="}},{"name":"./binding","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":18,"index":872},"end":{"line":21,"column":38,"index":892}},{"start":{"line":21,"column":18,"index":872},"end":{"line":21,"column":38,"index":892}}],"key":"OjrA0Bxm3t0WtSdWtaEky0moQW8="}},{"name":"./ClassHelpers","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":23,"column":23,"index":961},"end":{"line":23,"column":48,"index":986}}],"key":"WGi6Ta3blHDsAqu/ARLZUM+86ek="}},{"name":"./symbols","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":24,"column":18,"index":1006},"end":{"line":24,"column":38,"index":1026}}],"key":"ab2m4Asmhdk58sCF6nygJvPWckI="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  ////////////////////////////////////////////////////////////////////////////\n  //\n  // Copyright 2022 Realm Inc.\n  //\n  // Licensed under the Apache License, Version 2.0 (the \"License\");\n  // you may not use this file except in compliance with the License.\n  // You may obtain a copy of the License at\n  //\n  // http://www.apache.org/licenses/LICENSE-2.0\n  //\n  // Unless required by applicable law or agreed to in writing, software\n  // distributed under the License is distributed on an \"AS IS\" BASIS,\n  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  // See the License for the specific language governing permissions and\n  // limitations under the License.\n  //\n  ////////////////////////////////////////////////////////////////////////////\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.ObjectListeners = void 0;\n  /** @internal */\n  var ObjectListeners = /*#__PURE__*/function () {\n    /**\n     * Storage for the memoized, lazily created object notifier.\n     */\n\n    function ObjectListeners(realm, object) {\n      var _this = this;\n      _classCallCheck(this, ObjectListeners);\n      this.listeners = new (_$$_REQUIRE(_dependencyMap[2], \"./Listeners\").Listeners)({\n        add: function add(callback, keyPaths) {\n          var token = _this.notifier.addCallback(function (changes) {\n            try {\n              callback(_this.object, {\n                deleted: changes.isDeleted,\n                changedProperties: changes.changedColumns.map(_this.properties.getName)\n              });\n            } catch (err) {\n              // Scheduling a throw on the event loop,\n              // since throwing synchronously here would result in an abort in the calling C++\n              setImmediate(function () {\n                throw err;\n              });\n            }\n          }, keyPaths ? _this.mapKeyPaths(keyPaths) : undefined);\n          // Get an actual NotificationToken for the bigint value\n          return _$$_REQUIRE(_dependencyMap[3], \"./binding\").binding.NotificationToken.forObject(_this.notifier, token);\n        },\n        remove: function remove(token) {\n          token.unregister();\n        }\n      });\n      this.realm = realm;\n      this.object = object;\n      this.properties = (0, _$$_REQUIRE(_dependencyMap[4], \"./ClassHelpers\").getClassHelpers)(this.object.constructor).properties;\n    }\n    return _createClass(ObjectListeners, [{\n      key: \"notifier\",\n      get:\n      /**\n       * A memoized, lazily created object notifier.\n       */\n      function get() {\n        var notifier = this.internal;\n        if (notifier) {\n          return notifier;\n        } else {\n          notifier = _$$_REQUIRE(_dependencyMap[3], \"./binding\").binding.Helpers.makeObjectNotifier(this.realm, this.object[_$$_REQUIRE(_dependencyMap[5], \"./symbols\").OBJECT_INTERNAL]);\n          this.internal = notifier;\n          return notifier;\n        }\n      }\n    }, {\n      key: \"addListener\",\n      value: function addListener(callback, keyPaths) {\n        this.listeners.add(callback, keyPaths);\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(callback) {\n        this.listeners.remove(callback);\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners() {\n        this.listeners.removeAll();\n      }\n    }, {\n      key: \"mapKeyPaths\",\n      value: function mapKeyPaths(keyPaths) {\n        return this.realm.createKeyPathArray(this.object.objectSchema().name, keyPaths);\n      }\n    }]);\n  }();\n  exports.ObjectListeners = ObjectListeners;\n});","lineCount":102,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[5,2,3,0],[6,2,4,0],[7,2,5,0],[8,2,6,0],[9,2,7,0],[10,2,8,0],[11,2,9,0],[12,2,10,0],[13,2,11,0],[14,2,12,0],[15,2,13,0],[16,2,14,0],[17,2,15,0],[18,2,16,0],[19,2,17,0],[20,2,18,0],[21,2,18,0],[21,6,18,0,"_classCallCheck"],[21,21,18,0],[21,24,18,0,"_$$_REQUIRE"],[21,35,18,0],[21,36,18,0,"_dependencyMap"],[21,50,18,0],[22,2,18,0],[22,6,18,0,"_createClass"],[22,18,18,0],[22,21,18,0,"_$$_REQUIRE"],[22,32,18,0],[22,33,18,0,"_dependencyMap"],[22,47,18,0],[23,2,19,0,"Object"],[23,8,19,6],[23,9,19,7,"defineProperty"],[23,23,19,21],[23,24,19,22,"exports"],[23,31,19,29],[23,33,19,31],[23,45,19,43],[23,47,19,45],[24,4,19,47,"value"],[24,9,19,52],[24,11,19,54],[25,2,19,59],[25,3,19,60],[25,4,19,61],[26,2,20,0,"exports"],[26,9,20,7],[26,10,20,8,"ObjectListeners"],[26,25,20,23],[26,28,20,26],[26,33,20,31],[26,34,20,32],[27,2,25,0],[28,2,25,0],[28,6,26,6,"ObjectListeners"],[28,21,26,21],[29,4,29,4],[30,0,30,0],[31,0,31,0],[33,4,33,4],[33,13,33,4,"ObjectListeners"],[33,29,33,16,"realm"],[33,34,33,21],[33,36,33,23,"object"],[33,42,33,29],[33,44,33,31],[34,6,33,31],[34,10,33,31,"_this"],[34,15,33,31],[35,6,33,31,"_classCallCheck"],[35,21,33,31],[35,28,33,31,"ObjectListeners"],[35,43,33,31],[36,6,33,31],[36,11,39,4,"listeners"],[36,20,39,13],[36,23,39,16],[36,28,39,20,"_$$_REQUIRE"],[36,39,39,20],[36,40,39,20,"_dependencyMap"],[36,54,39,20],[36,74,39,32,"Listeners"],[36,83,39,41],[36,85,39,42],[37,8,40,8,"add"],[37,11,40,11],[37,13,40,13],[37,22,40,8,"add"],[37,25,40,11,"add"],[37,26,40,14,"callback"],[37,34,40,22],[37,36,40,24,"keyPaths"],[37,44,40,32],[37,46,40,37],[38,10,41,12],[38,14,41,18,"token"],[38,19,41,23],[38,22,41,26,"_this"],[38,27,41,30],[38,28,41,31,"notifier"],[38,36,41,39],[38,37,41,40,"addCallback"],[38,48,41,51],[38,49,41,52],[38,59,41,53,"changes"],[38,66,41,60],[38,68,41,65],[39,12,42,16],[39,16,42,20],[40,14,43,20,"callback"],[40,22,43,28],[40,23,43,29,"_this"],[40,28,43,33],[40,29,43,34,"object"],[40,35,43,40],[40,37,43,42],[41,16,44,24,"deleted"],[41,23,44,31],[41,25,44,33,"changes"],[41,32,44,40],[41,33,44,41,"isDeleted"],[41,42,44,50],[42,16,45,24,"changedProperties"],[42,33,45,41],[42,35,45,43,"changes"],[42,42,45,50],[42,43,45,51,"changedColumns"],[42,57,45,65],[42,58,45,66,"map"],[42,61,45,69],[42,62,45,70,"_this"],[42,67,45,74],[42,68,45,75,"properties"],[42,78,45,85],[42,79,45,86,"getName"],[42,86,45,93],[43,14,46,20],[43,15,46,21],[43,16,46,22],[44,12,47,16],[44,13,47,17],[44,14,48,16],[44,21,48,23,"err"],[44,24,48,26],[44,26,48,28],[45,14,49,20],[46,14,50,20],[47,14,51,20,"setImmediate"],[47,26,51,32],[47,27,51,33],[47,39,51,39],[48,16,52,24],[48,22,52,30,"err"],[48,25,52,33],[49,14,53,20],[49,15,53,21],[49,16,53,22],[50,12,54,16],[51,10,55,12],[51,11,55,13],[51,13,55,15,"keyPaths"],[51,21,55,23],[51,24,55,26,"_this"],[51,29,55,30],[51,30,55,31,"mapKeyPaths"],[51,41,55,42],[51,42,55,43,"keyPaths"],[51,50,55,51],[51,51,55,52],[51,54,55,55,"undefined"],[51,63,55,64],[51,64,55,65],[52,10,56,12],[53,10,57,12],[53,17,57,19,"_$$_REQUIRE"],[53,28,57,19],[53,29,57,19,"_dependencyMap"],[53,43,57,19],[53,61,57,29,"binding"],[53,68,57,36],[53,69,57,37,"NotificationToken"],[53,86,57,54],[53,87,57,55,"forObject"],[53,96,57,64],[53,97,57,65,"_this"],[53,102,57,69],[53,103,57,70,"notifier"],[53,111,57,78],[53,113,57,80,"token"],[53,118,57,85],[53,119,57,86],[54,8,58,8],[54,9,58,9],[55,8,59,8,"remove"],[55,14,59,14],[55,25,59,8,"remove"],[55,31,59,14,"remove"],[55,32,59,15,"token"],[55,37,59,20],[55,39,59,22],[56,10,60,12,"token"],[56,15,60,17],[56,16,60,18,"unregister"],[56,26,60,28],[56,27,60,29],[56,28,60,30],[57,8,61,8],[58,6,62,4],[58,7,62,5],[58,8,62,6],[59,6,34,8],[59,10,34,12],[59,11,34,13,"realm"],[59,16,34,18],[59,19,34,21,"realm"],[59,24,34,26],[60,6,35,8],[60,10,35,12],[60,11,35,13,"object"],[60,17,35,19],[60,20,35,22,"object"],[60,26,35,28],[61,6,36,8],[61,10,36,12],[61,11,36,13,"properties"],[61,21,36,23],[61,24,36,26],[61,25,36,27],[61,26,36,28],[61,28,36,30,"_$$_REQUIRE"],[61,39,36,30],[61,40,36,30,"_dependencyMap"],[61,54,36,30],[61,77,36,45,"getClassHelpers"],[61,92,36,60],[61,94,36,62],[61,98,36,66],[61,99,36,67,"object"],[61,105,36,73],[61,106,36,74,"constructor"],[61,117,36,85],[61,118,36,86],[61,119,36,87,"properties"],[61,129,36,97],[62,4,37,4],[63,4,37,5],[63,11,37,5,"_createClass"],[63,23,37,5],[63,24,37,5,"ObjectListeners"],[63,39,37,5],[64,6,37,5,"key"],[64,9,37,5],[65,6,37,5,"get"],[65,9,37,5],[66,6,63,4],[67,0,64,0],[68,0,65,0],[69,6,66,4],[69,15,66,4,"get"],[69,19,66,4],[69,21,66,19],[70,8,67,8],[70,12,67,12,"notifier"],[70,20,67,20],[70,23,67,23],[70,27,67,27],[70,28,67,28,"internal"],[70,36,67,36],[71,8,68,8],[71,12,68,12,"notifier"],[71,20,68,20],[71,22,68,22],[72,10,69,12],[72,17,69,19,"notifier"],[72,25,69,27],[73,8,70,8],[73,9,70,9],[73,15,71,13],[74,10,72,12,"notifier"],[74,18,72,20],[74,21,72,23,"_$$_REQUIRE"],[74,32,72,23],[74,33,72,23,"_dependencyMap"],[74,47,72,23],[74,65,72,33,"binding"],[74,72,72,40],[74,73,72,41,"Helpers"],[74,80,72,48],[74,81,72,49,"makeObjectNotifier"],[74,99,72,67],[74,100,72,68],[74,104,72,72],[74,105,72,73,"realm"],[74,110,72,78],[74,112,72,80],[74,116,72,84],[74,117,72,85,"object"],[74,123,72,91],[74,124,72,92,"_$$_REQUIRE"],[74,135,72,92],[74,136,72,92,"_dependencyMap"],[74,150,72,92],[74,168,72,102,"OBJECT_INTERNAL"],[74,183,72,117],[74,184,72,118],[74,185,72,119],[75,10,73,12],[75,14,73,16],[75,15,73,17,"internal"],[75,23,73,25],[75,26,73,28,"notifier"],[75,34,73,36],[76,10,74,12],[76,17,74,19,"notifier"],[76,25,74,27],[77,8,75,8],[78,6,76,4],[79,4,76,5],[80,6,76,5,"key"],[80,9,76,5],[81,6,76,5,"value"],[81,11,76,5],[81,13,77,4],[81,22,77,4,"addListener"],[81,33,77,15,"addListener"],[81,34,77,16,"callback"],[81,42,77,24],[81,44,77,26,"keyPaths"],[81,52,77,34],[81,54,77,36],[82,8,78,8],[82,12,78,12],[82,13,78,13,"listeners"],[82,22,78,22],[82,23,78,23,"add"],[82,26,78,26],[82,27,78,27,"callback"],[82,35,78,35],[82,37,78,37,"keyPaths"],[82,45,78,45],[82,46,78,46],[83,6,79,4],[84,4,79,5],[85,6,79,5,"key"],[85,9,79,5],[86,6,79,5,"value"],[86,11,79,5],[86,13,80,4],[86,22,80,4,"removeListener"],[86,36,80,18,"removeListener"],[86,37,80,19,"callback"],[86,45,80,27],[86,47,80,29],[87,8,81,8],[87,12,81,12],[87,13,81,13,"listeners"],[87,22,81,22],[87,23,81,23,"remove"],[87,29,81,29],[87,30,81,30,"callback"],[87,38,81,38],[87,39,81,39],[88,6,82,4],[89,4,82,5],[90,6,82,5,"key"],[90,9,82,5],[91,6,82,5,"value"],[91,11,82,5],[91,13,83,4],[91,22,83,4,"removeAllListeners"],[91,40,83,22,"removeAllListeners"],[91,41,83,22],[91,43,83,25],[92,8,84,8],[92,12,84,12],[92,13,84,13,"listeners"],[92,22,84,22],[92,23,84,23,"removeAll"],[92,32,84,32],[92,33,84,33],[92,34,84,34],[93,6,85,4],[94,4,85,5],[95,6,85,5,"key"],[95,9,85,5],[96,6,85,5,"value"],[96,11,85,5],[96,13,86,4],[96,22,86,4,"mapKeyPaths"],[96,33,86,15,"mapKeyPaths"],[96,34,86,16,"keyPaths"],[96,42,86,24],[96,44,86,26],[97,8,87,8],[97,15,87,15],[97,19,87,19],[97,20,87,20,"realm"],[97,25,87,25],[97,26,87,26,"createKeyPathArray"],[97,44,87,44],[97,45,87,45],[97,49,87,49],[97,50,87,50,"object"],[97,56,87,56],[97,57,87,57,"objectSchema"],[97,69,87,69],[97,70,87,70],[97,71,87,71],[97,72,87,72,"name"],[97,76,87,76],[97,78,87,78,"keyPaths"],[97,86,87,86],[97,87,87,87],[98,6,88,4],[99,4,88,5],[100,2,88,5],[101,2,90,0,"exports"],[101,9,90,7],[101,10,90,8,"ObjectListeners"],[101,25,90,23],[101,28,90,26,"ObjectListeners"],[101,43,90,41],[102,0,90,42],[102,3]],"functionMap":{"names":["<global>","ObjectListeners","constructor","Listeners_1.Listeners$argument_0.add","notifier.addCallback$argument_0","setImmediate$argument_0","Listeners_1.Listeners$argument_0.remove","get__notifier","addListener","removeListener","removeAllListeners","mapKeyPaths"],"mappings":"AAA;ACyB;ICO;KDI;aEG;oDCC;iCCU;qBDE;aDE;SFG;QKC;SLE;IMK;KNU;IOC;KPE;IQC;KRE;ISC;KTE;IUC;KVE;CDC"}},"type":"js/module"}]}