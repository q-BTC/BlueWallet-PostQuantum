{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":77,"column":0,"index":2814}}],"key":"5y7e5+zC7teYEEC6niD9f5zII1M="}},{"name":"../converter/index.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":29,"index":407},"end":{"line":14,"column":62,"index":440}}],"key":"Ag3zzNw9xV7orXnP3jkMq3Ra6IU="}},{"name":"uint8array-tools","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":27,"index":524},"end":{"line":16,"column":54,"index":551}}],"key":"d9z2uhLIsbEZR4MIqnLfYd/zTK8="}},{"name":"../converter/tools.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":19,"index":462},"end":{"line":15,"column":52,"index":495}},{"start":{"line":15,"column":19,"index":462},"end":{"line":15,"column":52,"index":495}}],"key":"SR887O+XGMYFT3fgXENi3rfreLc="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _slicedToArray = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var __importStar = this && this.__importStar || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result['default'] = mod;\n    return result;\n  };\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var convert = __importStar(_$$_REQUIRE(_dependencyMap[1], \"../converter/index.cjs\"));\n  var tools = __importStar(_$$_REQUIRE(_dependencyMap[2], \"uint8array-tools\"));\n  function psbtToBuffer(_ref) {\n    var globalMap = _ref.globalMap,\n      inputs = _ref.inputs,\n      outputs = _ref.outputs;\n    var _psbtToKeyVals = psbtToKeyVals({\n        globalMap: globalMap,\n        inputs: inputs,\n        outputs: outputs\n      }),\n      globalKeyVals = _psbtToKeyVals.globalKeyVals,\n      inputKeyVals = _psbtToKeyVals.inputKeyVals,\n      outputKeyVals = _psbtToKeyVals.outputKeyVals;\n    var globalBuffer = _$$_REQUIRE(_dependencyMap[3], \"../converter/tools.cjs\").keyValsToBuffer(globalKeyVals);\n    var keyValsOrEmptyToBuffer = function keyValsOrEmptyToBuffer(keyVals) {\n      return keyVals.length === 0 ? [Uint8Array.from([0])] : keyVals.map(_$$_REQUIRE(_dependencyMap[3], \"../converter/tools.cjs\").keyValsToBuffer);\n    };\n    var inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n    var outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n    var header = new Uint8Array(5);\n    header.set([0x70, 0x73, 0x62, 0x74, 0xff], 0);\n    return tools.concat([header, globalBuffer].concat(inputBuffers, outputBuffers));\n  }\n  exports.psbtToBuffer = psbtToBuffer;\n  var sortKeyVals = function sortKeyVals(a, b) {\n    return tools.compare(a.key, b.key);\n  };\n  function keyValsFromMap(keyValMap, converterFactory) {\n    var keyHexSet = new Set();\n    var keyVals = Object.entries(keyValMap).reduce(function (result, _ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        value = _ref3[1];\n      if (key === 'unknownKeyVals') return result;\n      // We are checking for undefined anyways. So ignore TS error\n      // @ts-ignore\n      var converter = converterFactory[key];\n      if (converter === undefined) return result;\n      var encodedKeyVals = (Array.isArray(value) ? value : [value]).map(converter.encode);\n      var keyHexes = encodedKeyVals.map(function (kv) {\n        return tools.toHex(kv.key);\n      });\n      keyHexes.forEach(function (hex) {\n        if (keyHexSet.has(hex)) throw new Error('Serialize Error: Duplicate key: ' + hex);\n        keyHexSet.add(hex);\n      });\n      return result.concat(encodedKeyVals);\n    }, []);\n    // Get other keyVals that have not yet been gotten\n    var otherKeyVals = keyValMap.unknownKeyVals ? keyValMap.unknownKeyVals.filter(function (keyVal) {\n      return !keyHexSet.has(tools.toHex(keyVal.key));\n    }) : [];\n    return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n  }\n  function psbtToKeyVals(_ref4) {\n    var globalMap = _ref4.globalMap,\n      inputs = _ref4.inputs,\n      outputs = _ref4.outputs;\n    // First parse the global keyVals\n    // Get any extra keyvals to pass along\n    return {\n      globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n      inputKeyVals: inputs.map(function (i) {\n        return keyValsFromMap(i, convert.inputs);\n      }),\n      outputKeyVals: outputs.map(function (o) {\n        return keyValsFromMap(o, convert.outputs);\n      })\n    };\n  }\n  exports.psbtToKeyVals = psbtToKeyVals;\n});","lineCount":87,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_slicedToArray"],[4,20,1,13],[4,23,1,13,"_$$_REQUIRE"],[4,34,1,13],[4,35,1,13,"_dependencyMap"],[4,49,1,13],[5,2,2,0],[5,6,2,4,"__importStar"],[5,18,2,16],[5,21,3,3],[5,25,3,7],[5,29,3,11],[5,33,3,15],[5,34,3,16,"__importStar"],[5,46,3,28],[5,50,4,2],[5,60,4,11,"mod"],[5,63,4,14],[5,65,4,16],[6,4,5,4],[6,8,5,8,"mod"],[6,11,5,11],[6,15,5,15,"mod"],[6,18,5,18],[6,19,5,19,"__esModule"],[6,29,5,29],[6,31,5,31],[6,38,5,38,"mod"],[6,41,5,41],[7,4,6,4],[7,8,6,8,"result"],[7,14,6,14],[7,17,6,17],[7,18,6,18],[7,19,6,19],[8,4,7,4],[8,8,7,8,"mod"],[8,11,7,11],[8,15,7,15],[8,19,7,19],[8,21,8,6],[8,26,8,11],[8,30,8,15,"k"],[8,31,8,16],[8,35,8,20,"mod"],[8,38,8,23],[8,40,9,8],[8,44,9,12,"Object"],[8,50,9,18],[8,51,9,19,"hasOwnProperty"],[8,65,9,33],[8,66,9,34,"call"],[8,70,9,38],[8,71,9,39,"mod"],[8,74,9,42],[8,76,9,44,"k"],[8,77,9,45],[8,78,9,46],[8,80,9,48,"result"],[8,86,9,54],[8,87,9,55,"k"],[8,88,9,56],[8,89,9,57],[8,92,9,60,"mod"],[8,95,9,63],[8,96,9,64,"k"],[8,97,9,65],[8,98,9,66],[9,4,10,4,"result"],[9,10,10,10],[9,11,10,11],[9,20,10,20],[9,21,10,21],[9,24,10,24,"mod"],[9,27,10,27],[10,4,11,4],[10,11,11,11,"result"],[10,17,11,17],[11,2,12,2],[11,3,12,3],[12,2,13,0,"Object"],[12,8,13,6],[12,9,13,7,"defineProperty"],[12,23,13,21],[12,24,13,22,"exports"],[12,31,13,29],[12,33,13,31],[12,45,13,43],[12,47,13,45],[13,4,13,47,"value"],[13,9,13,52],[13,11,13,54],[14,2,13,59],[14,3,13,60],[14,4,13,61],[15,2,14,0],[15,6,14,6,"convert"],[15,13,14,13],[15,16,14,16,"__importStar"],[15,28,14,28],[15,29,14,29,"require"],[15,40,14,36],[15,41,14,36,"_dependencyMap"],[15,55,14,36],[15,84,14,61],[15,85,14,62],[15,86,14,63],[16,2,16,0],[16,6,16,6,"tools"],[16,11,16,11],[16,14,16,14,"__importStar"],[16,26,16,26],[16,27,16,27,"require"],[16,38,16,34],[16,39,16,34,"_dependencyMap"],[16,53,16,34],[16,76,16,53],[16,77,16,54],[16,78,16,55],[17,2,17,0],[17,11,17,9,"psbtToBuffer"],[17,23,17,21,"psbtToBuffer"],[17,24,17,21,"_ref"],[17,28,17,21],[17,30,17,54],[18,4,17,54],[18,8,17,24,"globalMap"],[18,17,17,33],[18,20,17,33,"_ref"],[18,24,17,33],[18,25,17,24,"globalMap"],[18,34,17,33],[19,6,17,35,"inputs"],[19,12,17,41],[19,15,17,41,"_ref"],[19,19,17,41],[19,20,17,35,"inputs"],[19,26,17,41],[20,6,17,43,"outputs"],[20,13,17,50],[20,16,17,50,"_ref"],[20,20,17,50],[20,21,17,43,"outputs"],[20,28,17,50],[21,4,18,2],[21,8,18,2,"_psbtToKeyVals"],[21,22,18,2],[21,25,18,57,"psbtToKeyVals"],[21,38,18,70],[21,39,18,71],[22,8,19,4,"globalMap"],[22,17,19,13],[22,19,19,4,"globalMap"],[22,28,19,13],[23,8,20,4,"inputs"],[23,14,20,10],[23,16,20,4,"inputs"],[23,22,20,10],[24,8,21,4,"outputs"],[24,15,21,11],[24,17,21,4,"outputs"],[25,6,22,2],[25,7,22,3],[25,8,22,4],[26,6,18,10,"globalKeyVals"],[26,19,18,23],[26,22,18,23,"_psbtToKeyVals"],[26,36,18,23],[26,37,18,10,"globalKeyVals"],[26,50,18,23],[27,6,18,25,"inputKeyVals"],[27,18,18,37],[27,21,18,37,"_psbtToKeyVals"],[27,35,18,37],[27,36,18,25,"inputKeyVals"],[27,48,18,37],[28,6,18,39,"outputKeyVals"],[28,19,18,52],[28,22,18,52,"_psbtToKeyVals"],[28,36,18,52],[28,37,18,39,"outputKeyVals"],[28,50,18,52],[29,4,23,2],[29,8,23,8,"globalBuffer"],[29,20,23,20],[29,23,23,23,"_$$_REQUIRE"],[29,34,23,23],[29,35,23,23,"_dependencyMap"],[29,49,23,23],[29,80,23,34,"keyValsToBuffer"],[29,95,23,49],[29,96,23,50,"globalKeyVals"],[29,109,23,63],[29,110,23,64],[30,4,24,2],[30,8,24,8,"keyValsOrEmptyToBuffer"],[30,30,24,30],[30,33,24,33],[30,42,24,8,"keyValsOrEmptyToBuffer"],[30,64,24,30,"keyValsOrEmptyToBuffer"],[30,65,24,33,"keyVals"],[30,72,24,40],[31,6,24,40],[31,13,25,4,"keyVals"],[31,20,25,11],[31,21,25,12,"length"],[31,27,25,18],[31,32,25,23],[31,33,25,24],[31,36,26,8],[31,37,26,9,"Uint8Array"],[31,47,26,19],[31,48,26,20,"from"],[31,52,26,24],[31,53,26,25],[31,54,26,26],[31,55,26,27],[31,56,26,28],[31,57,26,29],[31,58,26,30],[31,61,27,8,"keyVals"],[31,68,27,15],[31,69,27,16,"map"],[31,72,27,19],[31,73,27,20,"_$$_REQUIRE"],[31,84,27,20],[31,85,27,20,"_dependencyMap"],[31,99,27,20],[31,130,27,31,"keyValsToBuffer"],[31,145,27,46],[31,146,27,47],[32,4,27,47],[33,4,28,2],[33,8,28,8,"inputBuffers"],[33,20,28,20],[33,23,28,23,"keyValsOrEmptyToBuffer"],[33,45,28,45],[33,46,28,46,"inputKeyVals"],[33,58,28,58],[33,59,28,59],[34,4,29,2],[34,8,29,8,"outputBuffers"],[34,21,29,21],[34,24,29,24,"keyValsOrEmptyToBuffer"],[34,46,29,46],[34,47,29,47,"outputKeyVals"],[34,60,29,60],[34,61,29,61],[35,4,30,2],[35,8,30,8,"header"],[35,14,30,14],[35,17,30,17],[35,21,30,21,"Uint8Array"],[35,31,30,31],[35,32,30,32],[35,33,30,33],[35,34,30,34],[36,4,31,2,"header"],[36,10,31,8],[36,11,31,9,"set"],[36,14,31,12],[36,15,31,13],[36,16,31,14],[36,20,31,18],[36,22,31,20],[36,26,31,24],[36,28,31,26],[36,32,31,30],[36,34,31,32],[36,38,31,36],[36,40,31,38],[36,44,31,42],[36,45,31,43],[36,47,31,45],[36,48,31,46],[36,49,31,47],[37,4,32,2],[37,11,32,9,"tools"],[37,16,32,14],[37,17,32,15,"concat"],[37,23,32,21],[37,24,33,4],[37,25,33,5,"header"],[37,31,33,11],[37,33,33,13,"globalBuffer"],[37,45,33,25],[37,46,33,26],[37,47,33,27,"concat"],[37,53,33,33],[37,54,33,34,"inputBuffers"],[37,66,33,46],[37,68,33,48,"outputBuffers"],[37,81,33,61],[37,82,34,2],[37,83,34,3],[38,2,35,0],[39,2,36,0,"exports"],[39,9,36,7],[39,10,36,8,"psbtToBuffer"],[39,22,36,20],[39,25,36,23,"psbtToBuffer"],[39,37,36,35],[40,2,37,0],[40,6,37,6,"sortKeyVals"],[40,17,37,17],[40,20,37,20],[40,29,37,6,"sortKeyVals"],[40,40,37,17,"sortKeyVals"],[40,41,37,21,"a"],[40,42,37,22],[40,44,37,24,"b"],[40,45,37,25],[40,47,37,30],[41,4,38,2],[41,11,38,9,"tools"],[41,16,38,14],[41,17,38,15,"compare"],[41,24,38,22],[41,25,38,23,"a"],[41,26,38,24],[41,27,38,25,"key"],[41,30,38,28],[41,32,38,30,"b"],[41,33,38,31],[41,34,38,32,"key"],[41,37,38,35],[41,38,38,36],[42,2,39,0],[42,3,39,1],[43,2,40,0],[43,11,40,9,"keyValsFromMap"],[43,25,40,23,"keyValsFromMap"],[43,26,40,24,"keyValMap"],[43,35,40,33],[43,37,40,35,"converterFactory"],[43,53,40,51],[43,55,40,53],[44,4,41,2],[44,8,41,8,"keyHexSet"],[44,17,41,17],[44,20,41,20],[44,24,41,24,"Set"],[44,27,41,27],[44,28,41,28],[44,29,41,29],[45,4,42,2],[45,8,42,8,"keyVals"],[45,15,42,15],[45,18,42,18,"Object"],[45,24,42,24],[45,25,42,25,"entries"],[45,32,42,32],[45,33,42,33,"keyValMap"],[45,42,42,42],[45,43,42,43],[45,44,42,44,"reduce"],[45,50,42,50],[45,51,42,51],[45,61,42,52,"result"],[45,67,42,58],[45,69,42,58,"_ref2"],[45,74,42,58],[45,76,42,77],[46,6,42,77],[46,10,42,77,"_ref3"],[46,15,42,77],[46,18,42,77,"_slicedToArray"],[46,32,42,77],[46,33,42,77,"_ref2"],[46,38,42,77],[47,8,42,61,"key"],[47,11,42,64],[47,14,42,64,"_ref3"],[47,19,42,64],[48,8,42,66,"value"],[48,13,42,71],[48,16,42,71,"_ref3"],[48,21,42,71],[49,6,43,4],[49,10,43,8,"key"],[49,13,43,11],[49,18,43,16],[49,34,43,32],[49,36,43,34],[49,43,43,41,"result"],[49,49,43,47],[50,6,44,4],[51,6,45,4],[52,6,46,4],[52,10,46,10,"converter"],[52,19,46,19],[52,22,46,22,"converterFactory"],[52,38,46,38],[52,39,46,39,"key"],[52,42,46,42],[52,43,46,43],[53,6,47,4],[53,10,47,8,"converter"],[53,19,47,17],[53,24,47,22,"undefined"],[53,33,47,31],[53,35,47,33],[53,42,47,40,"result"],[53,48,47,46],[54,6,48,4],[54,10,48,10,"encodedKeyVals"],[54,24,48,24],[54,27,48,27],[54,28,48,28,"Array"],[54,33,48,33],[54,34,48,34,"isArray"],[54,41,48,41],[54,42,48,42,"value"],[54,47,48,47],[54,48,48,48],[54,51,48,51,"value"],[54,56,48,56],[54,59,48,59],[54,60,48,60,"value"],[54,65,48,65],[54,66,48,66],[54,68,48,68,"map"],[54,71,48,71],[54,72,49,6,"converter"],[54,81,49,15],[54,82,49,16,"encode"],[54,88,50,4],[54,89,50,5],[55,6,51,4],[55,10,51,10,"keyHexes"],[55,18,51,18],[55,21,51,21,"encodedKeyVals"],[55,35,51,35],[55,36,51,36,"map"],[55,39,51,39],[55,40,51,40],[55,50,51,40,"kv"],[55,52,51,42],[56,8,51,42],[56,15,51,46,"tools"],[56,20,51,51],[56,21,51,52,"toHex"],[56,26,51,57],[56,27,51,58,"kv"],[56,29,51,60],[56,30,51,61,"key"],[56,33,51,64],[56,34,51,65],[57,6,51,65],[57,8,51,66],[58,6,52,4,"keyHexes"],[58,14,52,12],[58,15,52,13,"forEach"],[58,22,52,20],[58,23,52,21],[58,33,52,21,"hex"],[58,36,52,24],[58,38,52,28],[59,8,53,6],[59,12,53,10,"keyHexSet"],[59,21,53,19],[59,22,53,20,"has"],[59,25,53,23],[59,26,53,24,"hex"],[59,29,53,27],[59,30,53,28],[59,32,54,8],[59,38,54,14],[59,42,54,18,"Error"],[59,47,54,23],[59,48,54,24],[59,82,54,58],[59,85,54,61,"hex"],[59,88,54,64],[59,89,54,65],[60,8,55,6,"keyHexSet"],[60,17,55,15],[60,18,55,16,"add"],[60,21,55,19],[60,22,55,20,"hex"],[60,25,55,23],[60,26,55,24],[61,6,56,4],[61,7,56,5],[61,8,56,6],[62,6,57,4],[62,13,57,11,"result"],[62,19,57,17],[62,20,57,18,"concat"],[62,26,57,24],[62,27,57,25,"encodedKeyVals"],[62,41,57,39],[62,42,57,40],[63,4,58,2],[63,5,58,3],[63,7,58,5],[63,9,58,7],[63,10,58,8],[64,4,59,2],[65,4,60,2],[65,8,60,8,"otherKeyVals"],[65,20,60,20],[65,23,60,23,"keyValMap"],[65,32,60,32],[65,33,60,33,"unknownKeyVals"],[65,47,60,47],[65,50,61,6,"keyValMap"],[65,59,61,15],[65,60,61,16,"unknownKeyVals"],[65,74,61,30],[65,75,61,31,"filter"],[65,81,61,37],[65,82,61,38],[65,92,61,38,"keyVal"],[65,98,61,44],[65,100,61,48],[66,6,62,8],[66,13,62,15],[66,14,62,16,"keyHexSet"],[66,23,62,25],[66,24,62,26,"has"],[66,27,62,29],[66,28,62,30,"tools"],[66,33,62,35],[66,34,62,36,"toHex"],[66,39,62,41],[66,40,62,42,"keyVal"],[66,46,62,48],[66,47,62,49,"key"],[66,50,62,52],[66,51,62,53],[66,52,62,54],[67,4,63,6],[67,5,63,7],[67,6,63,8],[67,9,64,6],[67,11,64,8],[68,4,65,2],[68,11,65,9,"keyVals"],[68,18,65,16],[68,19,65,17,"concat"],[68,25,65,23],[68,26,65,24,"otherKeyVals"],[68,38,65,36],[68,39,65,37],[68,40,65,38,"sort"],[68,44,65,42],[68,45,65,43,"sortKeyVals"],[68,56,65,54],[68,57,65,55],[69,2,66,0],[70,2,67,0],[70,11,67,9,"psbtToKeyVals"],[70,24,67,22,"psbtToKeyVals"],[70,25,67,22,"_ref4"],[70,30,67,22],[70,32,67,55],[71,4,67,55],[71,8,67,25,"globalMap"],[71,17,67,34],[71,20,67,34,"_ref4"],[71,25,67,34],[71,26,67,25,"globalMap"],[71,35,67,34],[72,6,67,36,"inputs"],[72,12,67,42],[72,15,67,42,"_ref4"],[72,20,67,42],[72,21,67,36,"inputs"],[72,27,67,42],[73,6,67,44,"outputs"],[73,13,67,51],[73,16,67,51,"_ref4"],[73,21,67,51],[73,22,67,44,"outputs"],[73,29,67,51],[74,4,68,2],[75,4,69,2],[76,4,70,2],[76,11,70,9],[77,6,71,4,"globalKeyVals"],[77,19,71,17],[77,21,71,19,"keyValsFromMap"],[77,35,71,33],[77,36,71,34,"globalMap"],[77,45,71,43],[77,47,71,45,"convert"],[77,54,71,52],[77,55,71,53,"globals"],[77,62,71,60],[77,63,71,61],[78,6,72,4,"inputKeyVals"],[78,18,72,16],[78,20,72,18,"inputs"],[78,26,72,24],[78,27,72,25,"map"],[78,30,72,28],[78,31,72,29],[78,41,72,29,"i"],[78,42,72,30],[79,8,72,30],[79,15,72,34,"keyValsFromMap"],[79,29,72,48],[79,30,72,49,"i"],[79,31,72,50],[79,33,72,52,"convert"],[79,40,72,59],[79,41,72,60,"inputs"],[79,47,72,66],[79,48,72,67],[80,6,72,67],[80,8,72,68],[81,6,73,4,"outputKeyVals"],[81,19,73,17],[81,21,73,19,"outputs"],[81,28,73,26],[81,29,73,27,"map"],[81,32,73,30],[81,33,73,31],[81,43,73,31,"o"],[81,44,73,32],[82,8,73,32],[82,15,73,36,"keyValsFromMap"],[82,29,73,50],[82,30,73,51,"o"],[82,31,73,52],[82,33,73,54,"convert"],[82,40,73,61],[82,41,73,62,"outputs"],[82,48,73,69],[82,49,73,70],[83,6,73,70],[84,4,74,2],[84,5,74,3],[85,2,75,0],[86,2,76,0,"exports"],[86,9,76,7],[86,10,76,8,"psbtToKeyVals"],[86,23,76,21],[86,26,76,24,"psbtToKeyVals"],[86,39,76,37],[87,0,76,38],[87,3]],"functionMap":{"names":["<global>","<anonymous>","psbtToBuffer","keyValsOrEmptyToBuffer","sortKeyVals","keyValsFromMap","Object.entries.reduce$argument_0","encodedKeyVals.map$argument_0","keyHexes.forEach$argument_0","keyValMap.unknownKeyVals.filter$argument_0","psbtToKeyVals","inputs.map$argument_0","outputs.map$argument_0"],"mappings":"AAA;ECG;GDQ;AEK;iCCO;+CDG;CFQ;oBIE;CJE;AKC;mDCE;wCCS,yBD;qBEC;KFI;GDE;sCIG;OJE;CLG;AUC;6BCK,sCD;+BEC,uCF;CVE"}},"type":"js/module"}]}